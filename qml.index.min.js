"use strict";var log=null,qml=function(){var e={};e._get=function(t){return e[t]};var t=e;t.dyndef||(t.dyndef={}),t.core||(t.core={}),t.html5||(t.html5={}),t.html5.dist||(t.html5.dist={}),t.controls||(t.controls={}),t.controls.core||(t.controls.core={}),t.controls.mixins||(t.controls.mixins={}),t.controls.pure||(t.controls.pure={}),t.controls.input||(t.controls.input={}),t.core.core=function(){var e=t;e._get=function(t){return e[t]},e.core.device=0,e.core.vendor="",e.core.trace={key:!1,focus:!1},e.core.keyCodes={13:"Select",27:"Back",37:"Left",32:"Space",33:"PageUp",34:"PageDown",38:"Up",39:"Right",40:"Down",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",112:"Red",113:"Green",114:"Yellow",115:"Blue"},e.core.os=navigator.platform,e.core.userAgent=navigator.userAgent,e.core.language=navigator.language;var i=function(t,i){navigator.userAgent.indexOf(t)<0||(e.core.vendor=i.vendor,e.core.device=i.device,e.core.os=i.os)};e.core.vendor||(i("Blackberry",{vendor:"blackberry",device:2,os:"blackberry"}),i("Android",{vendor:"google",device:2,os:"android"}),i("iPhone",{vendor:"apple",device:2,os:"iOS"}),i("iPad",{vendor:"apple",device:2,os:"iOS"}),i("iPod",{vendor:"apple",device:2,os:"iOS"})),navigator.userAgent.indexOf("Chromium")>=0?e.core.browser="Chromium":navigator.userAgent.indexOf("Chrome")>=0?e.core.browser="Chrome":navigator.userAgent.indexOf("Opera")>=0?e.core.browser="Opera":navigator.userAgent.indexOf("Firefox")>=0?e.core.browser="Firefox":navigator.userAgent.indexOf("Safari")>=0?e.core.browser="Safari":navigator.userAgent.indexOf("MSIE")>=0?e.core.browser="IE":navigator.userAgent.indexOf("YaBrowser")>=0?e.core.browser="Yandex":e.core.browser="",t._backend=function(){return t.html5.html},null===log&&(log=console.log.bind(console)),t.qsTr=function(e,i){return t._context.qsTr.apply(qml._context,arguments)};var r={maroon:"800000",red:"ff0000",orange:"ffA500",yellow:"ffff00",olive:"808000",purple:"800080",fuchsia:"ff00ff",white:"ffffff",lime:"00ff00",green:"008000",navy:"000080",blue:"0000ff",aqua:"00ffff",teal:"008080",black:"000000",silver:"c0c0c0",gray:"080808",transparent:"0000"},n=function(e,t,i,r){try{return e.apply(t,i)}catch(e){r(e)}};e.core.safeCall=function(e,t,i){return function(r){return n(r,e,t,i)}};var o=e.core.CoreObject=function(){},s=o.prototype;s.constructor=e.core.CoreObject,s.__create=function(){},s.__setup=function(){};var a=e.core.Color=function(e){if(Array.isArray(e))return this.r=e[0],this.g=e[1],this.b=e[2],void(this.a=void 0!==e[3]?e[3]:255);if("string"!=typeof e)return this.r=this.b=this.a=255,this.g=0,void log("invalid color specification: "+e);var t;if("rgba"==e.substring(0,4)){var i=e.indexOf("("),n=e.lastIndexOf(")");return e=e.substring(i+1,n).split(","),this.r=parseInt(e[0],10),this.g=parseInt(e[1],10),this.b=parseInt(e[2],10),void(this.a=Math.floor(255*parseFloat(e[3])))}var o=e.charAt(0);if(t="#"!=o?r[e]:e.substring(1),!t)return this.r=255,this.g=0,this.b=255,void log("invalid color specification: "+e);var s=t.length;if(3==s||4==s){var a=parseInt(t.charAt(0),16),c=parseInt(t.charAt(1),16),i=parseInt(t.charAt(2),16),h=4==s?parseInt(t.charAt(3),16):15;this.r=a<<4|a,this.g=c<<4|c,this.b=i<<4|i,this.a=h<<4|h}else{if(6!=s&&8!=s)throw new Error("invalid color specification: "+e);this.r=parseInt(t.substring(0,2),16),this.g=parseInt(t.substring(2,4),16),this.b=parseInt(t.substring(4,6),16),this.a=8==s?parseInt(t.substring(6,8),16):255}},c=a.prototype;c.constructor=e.core.Color,c.rgba=function(){return"rgba("+this.r+","+this.g+","+this.b+","+this.a/255+")"},e.core.normalizeColor=function(e){return new a(e).rgba()},e.core.mixColor=function(e,t,i){var r=new a(e),n=new a(t),o=function(e,t,i){return Math.floor((t-e)*i+e)};return[o(r.r,n.r,i),o(r.g,n.g,i),o(r.b,n.b,i),o(r.a,n.a,i)]},e.core.DelayedAction=function(e,t){this.context=e,this.action=function(){this._scheduled=!1,t()}.bind(this)},e.core.DelayedAction.prototype.schedule=function(){this._scheduled||(this._scheduled=!0,this.context.scheduleAction(this.action))},e.addProperty=function(e,t,i,r){var n;switch(t){case"enum":case"int":n=function(e){return~~e};break;case"bool":n=function(e){return!!e};break;case"real":n=function(e){return+e};break;case"string":n=function(e){return String(e)};break;default:n=function(e){return e}}if(void 0!==r)r=n(r);else switch(t){case"enum":case"int":r=0;break;case"bool":r=!1;break;case"real":r=0;break;case"string":r="";break;case"array":r=[];break;case"Color":r="#0000";break;default:r=t[0].toUpperCase()==t[0]?null:void 0}var o="__property_"+i,s="__forward_"+i;Object.defineProperty(e,i,{get:function(){var e=this[o];return void 0!==e?void 0!==e.interpolatedValue?e.interpolatedValue:e.value:r},set:function(e){e=n(e);var t=this[o];if(void 0===t){if(e===r)return;t=this[o]={value:r}}var a=this._context.backend,c=this.getAnimation(i);if(c&&t.value!==e){t.frameRequest&&a.cancelAnimationFrame(t.frameRequest);var h=new Date;t.started=h.getTime()+h.getMilliseconds()/1e3;var d=void 0!==t.interpolatedValue?t.interpolatedValue:t.value,l=e,_=this,p=function(){a.cancelAnimationFrame(t.frameRequest),t.frameRequest=void 0,c.complete=function(){},c.running=!1,t.interpolatedValue=void 0,t.started=void 0,_._update(i,l,d)},u=c.duration,g=function(){var e=new Date,r=e.getTime()+e.getMilliseconds()/1e3,o=1*(r-t.started)/u;o>=1?p():(t.interpolatedValue=n(c.interpolate(l,d,o)),_._update(i,t.interpolatedValue,d),t.frameRequest=a.requestAnimationFrame(g))};t.frameRequest=a.requestAnimationFrame(g),c.running=!0,c.complete=p}var f=t.value;if(f!==e){var v=this[s];if(void 0!==v){if(null!==f&&f instanceof Object){var m=f[v];return void(e!==m&&(f[v]=e,this._update(i,e,m)))}e instanceof Object&&this.connectOnChanged(e,v,function(e,t){this._update(i,e,t)}.bind(this))}t.value=e,c&&c.running||e!=r||delete this[o],c||this._update(i,e,f)}},enumerable:!0})},e.addAliasProperty=function(e,t,i,r){var n=i();e.connectOnChanged(n,r,function(i){e._update(t,i)}),Object.defineProperty(e,t,{get:function(){return n[r]},set:function(e){n[r]=e},enumerable:!0})},e.core.createSignal=function(e){return function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;++r)i[r]=arguments[r];this.emitWithArgs(e,i)}},e.core.createSignalForwarder=function(e,t){return function(){for(var i=arguments.length,r=new Array(i),n=0;n<i;++n)r[n]=arguments[n];e.emitWithArgs(t,r)}},e.core.EventBinder=function(e){this.target=e,this.callbacks={},this.enabled=!1},e.core.EventBinder.prototype.on=function(e,t){if(e in this.callbacks)throw new Error("double adding of event ("+e+")");this.callbacks[e]=t,this.enabled&&this.target.on(e,t)},e.core.EventBinder.prototype.constructor=e.core.EventBinder,e.core.EventBinder.prototype.enable=function(e){if(e!=this.enabled){var t=this.target;if(this.enabled=e,e)for(var i in this.callbacks)t.on(i,this.callbacks[i]);else for(var i in this.callbacks)t.removeListener(i,this.callbacks[i])}};var h=function(e,t,i,r){var i="__"+e+"__"+i;i in t?t[i]=function(){try{r.apply(this,arguments)}catch(t){log("error invoking base prototype event "+e+":"+i,t,t.stack)}}:t[i]=r};return e.core._protoOn=function(e,t,i){h("on",e,t,i)},e.core._protoOnChanged=function(e,t,i){h("changed",e,t,i)},e.core._protoOnKey=function(e,t,i){h("key",e,t,i)},e}();var i=t.core.core,r=t.core.CoreObject,n=r.prototype,o=t.core.EventEmitter=function(e,t){r.apply(this,arguments),this._eventHandlers={},this._onConnections=[]},s=o.prototype=Object.create(n);s.constructor=o,s.componentName="core.EventEmitter",s.on=function(e,t){if(""===e)throw new Error("empty listener name");if(e in this._eventHandlers)this._eventHandlers[e].push(t);else{if(this._eventHandlers[e])throw new Error("listener callback added event handler");this._eventHandlers[e]=[t]}},s.discard=function(){for(var e in this._eventHandlers)this.removeAllListeners(e);this._onConnections.forEach(function(e){e[0].removeListener(e[1],e[2])}),this._onConnections=[]},s.emitWithArgs=function(e,i){if(""===e)throw new Error("empty listener name");var r=this["__on__"+e],n=this._eventHandlers[e];if(void 0!==r||void 0!==n){var o=t.core.safeCall(this,i,function(t){log("event/signal "+e+" handler failed:",t,t.stack)});void 0!==r&&o(r),void 0!==n&&n.forEach(o)}},s.connectOn=function(e,t,i){e.on(t,i),this._onConnections.push([e,t,i])},s.removeListener=function(e,t){if(!(e in this._eventHandlers)||void 0===t||null===t||""===e)return void log("invalid removeListener("+e+", "+t+") invocation",(new Error).stack);var i=this._eventHandlers[e],r=i.indexOf(t);r>=0?i.splice(r,1):log("failed to remove listener for",e,"from",this),i.length||this.removeAllListeners(e)},s.emit=function(e){if(""===e)throw new Error("empty listener name");var i=this["__on__"+e],r=this._eventHandlers[e];if(void 0!==i||void 0!==r){for(var n=arguments.length,o=new Array(n-1),s=1;s<n;++s)o[s-1]=arguments[s];var a=t.core.safeCall(this,o,function(t){log("event/signal "+e+" handler failed:",t,t.stack)});void 0!==i&&a(i),void 0!==r&&r.forEach(a)}},s.removeAllListeners=function(e){delete this._eventHandlers[e]};var a=t.core.EventEmitter,c=a.prototype,h=t.core.Object=function(e,t){a.apply(this,arguments),this.parent=e,this.children=[],this._context=e?e._context:null,this._local={},t===!0&&(this._local._delegate=this),this._changedHandlers={},this._changedConnections=[],this._pressedHandlers={},this._animations={},this._updaters={}},d=h.prototype=Object.create(c);d.constructor=h,d.componentName="core.Object",d.addChild=function(e){this.children.push(e)},d.setAnimation=function(e,t){this._animations[e]=t},d.removeOnChanged=function(e,t){if(e in this._changedHandlers){var i=this._changedHandlers[e],r=i.indexOf(t);r>=0?i.splice(r,1):log("failed to remove changed listener for",e,"from",this)}},d.connectOnChanged=function(e,t,i){e.onChanged(t,i),this._changedConnections.push([e,t,i])},d.onChanged=function(e,t){e in this._changedHandlers?this._changedHandlers[e].push(t):this._changedHandlers[e]=[t]},d.discard=function(){this._changedConnections.forEach(function(e){e[0].removeOnChanged(e[1],e[2])}),this._changedConnections=[],this.children.forEach(function(e){e.discard()}),this.children=[],this.parent=null,this._local={},this._changedHandlers={},this._pressedHandlers={},this._animations={},this._updaters={},t.core.EventEmitter.prototype.discard.apply(this)},d._tryFocus=function(){return!1},d._get=function(e){if(e in this)return this[e];for(var t=this;t;){if(e in t._local)return t._local[e];t=t.parent}throw new Error("invalid property requested: '"+e)},d.onPressed=function(e,t){var i;i="Key"!=e?function(e,i){return i.accepted=!0,t(e,i),i.accepted}:t,e in this._pressedHandlers?this._pressedHandlers[e].push(i):this._pressedHandlers[e]=[i]},d._setId=function(e){for(var t=this;t;)t._local[e]=this,t=t.parent},d._update=function(e,i){var r=this["__changed__"+e],n=this._changedHandlers[e];if(void 0!==r||void 0!==n){var o=t.core.safeCall(this,[i],function(t){log("on "+e+" changed callback failed: ",t,t.stack)});void 0!==r&&o(r),void 0!==n&&n.forEach(o)}},d._removeUpdater=function(e,t){var i=this._updaters,r=i[e];void 0!==r&&r.forEach(function(e){var t=e[0],i=e[1],r=e[2];t.removeOnChanged(i,r)}),t?i[e]=t:delete i[e]},d.getAnimation=function(e,t){var i=this._animations[e];return i&&i.enabled()?i:null};var l=t.core.Object,_=l.prototype,p=t.core.Item=function(e,t){if(l.apply(this,arguments),this._topPadding=0,e){if(this.element)throw new Error("double ctor call");this.createElement(this.getTag())}},u=p.prototype=Object.create(_);u.constructor=p,u.componentName="core.Item",u.boxChanged=t.core.createSignal("boxChanged"),u.createElement=function(e){this.element=this._context.createElement(e),this._context.registerStyle(this,e),this.parent.element.append(this.element)},u.registerStyle=function(e,t){e.addRule(t,"position: absolute; visibility: inherit; border-style: solid; border-width: 0px; white-space: nowrap; border-radius: 0px; opacity: 1.0; transform: none; left: 0px; top: 0px; width: 0px; height: 0px;")},u.hasActiveFocus=function(){for(var e=this;e.parent;){if(e.parent.focusedChild!=e)return!1;e=e.parent}return!0},u._focusTree=function(e){this.activeFocus=e,this.focusedChild&&this.focusedChild._focusTree(e)},u._update=function(e,i){switch(e){case"width":this.style("width",i),this.boxChanged();break;case"height":this.style("height",i-this._topPadding),this.boxChanged();break;case"x":case"viewX":var r=this.x+this.viewX;this.style("left",r),this.boxChanged();break;case"y":case"viewY":var n=this.y+this.viewY;this.style("top",n),this.boxChanged();break;case"opacity":this.element&&this.style("opacity",i);break;case"visibleInView":case"visible":this.element&&this.style("visibility",this.visible&&this.visibleInView?"inherit":"hidden");break;case"z":this.style("z-index",i);break;case"radius":this.style("border-radius",i);break;case"clip":this.style("overflow",i?"hidden":"visible")}t.core.Object.prototype._update.apply(this,arguments)},u.getTag=function(){return"div"},u.forceActiveFocus=function(){for(var e=this;e.parent;)e.parent._focusChild(e),e=e.parent},u._tryFocus=function(){if(!this.visible)return!1;if(this.focusedChild&&this.focusedChild._tryFocus())return!0;for(var e=this.children,t=0;t<e.length;++t){var i=e[t];if(i._tryFocus())return this._focusChild(i),!0}return this.focus},u._focusChild=function(e){if(e.parent!==this)throw new Error("invalid object passed as child");this.focusedChild!==e&&(this.focusedChild&&this.focusedChild._focusTree(!1),this.focusedChild=e,this.focusedChild&&this.focusedChild._focusTree(this.hasActiveFocus()))},u._mapCSSAttribute=function(e){return{width:"width",height:"height",x:"left",y:"top",viewX:"left",viewY:"top",opacity:"opacity",radius:"border-radius",rotate:"transform",boxshadow:"box-shadow",transform:"transform",visible:"visibility",visibleInView:"visibility",background:"background",color:"color",font:"font"}[e]},u._updateAnimation=function(e,t){if(!this._context.backend.capabilities.csstransitions||t&&!t.cssTransition)return!1;var i=this._mapCSSAttribute(e);if(void 0!==i){if(!t)throw new Error("resetting transition was not implemented");return t._target=e,this.setTransition(i,t)}return!1},u.toScreen=function(){for(var e=this,t=0,i=0,r=this.width,n=this.height;e;)t+=e.x,i+=e.y,"view"in e&&(t+=e.viewX+e.view.content.x,i+=e.viewY+e.view.content.y),e=e.parent;return[t,i,t+r,i+n,t+r/2,i+n/2]},u.setAnimation=function(e,i){this._updateAnimation(e,i)||t.core.Object.prototype.setAnimation.apply(this,arguments)},u.focusChild=function(e){this._propagateFocusToParents(),this._focusChild(e)},u.setTransition=function(e,t){var i=this._context.backend;if(!i.capabilities.csstransitions)return!1;var r=i,n={property:r.getPrefixedName("transition-property"),delay:r.getPrefixedName("transition-delay"),duration:r.getPrefixedName("transition-duration"),timing:r.getPrefixedName("transition-timing-function")};e=r.getPrefixedName(e)||e;var o=this.style(n.property)||[],s=this.style(n.duration)||[],a=this.style(n.timing)||[],c=this.style(n.delay)||[],h=o.indexOf(e);h===-1?(o.push(e),s.push(t.duration+"ms"),a.push(t.easing),c.push(t.delay+"ms")):(s[h]=t.duration+"ms",a[h]=t.easing,c[h]=t.delay+"ms");var d={};return d[n.property]=o,d[n.duration]=s,d[n.timing]=a,d[n.delay]=c,"smartTV"!==this._context.system.os&&"netcast"!==this._context.system.os||(d["transition-property"]=o,d["transition-duration"]=s,d["transition-delay"]=c,d["transition-timing-function"]=a),this.style(d),!0},u.style=function(e,t){var i=this.element;return i?i.style(e,t):void log("WARNING: style skipped:",e,t)},u._updateStyle=function(){var e=this.element;e&&e.updateStyle()},u.addChild=function(e){t.core.Object.prototype.addChild.apply(this,arguments),e._tryFocus()&&e._propagateFocusToParents()},u._propagateFocusToParents=function(){for(var e=this;e.parent&&(!e.parent.focusedChild||!e.parent.focusedChild.visible);)e.parent._focusChild(e),e=e.parent},u.setFocus=function(){this.forceActiveFocus()},u.discard=function(){t.core.Object.prototype.discard.apply(this),this.focusedChild=null,this.element&&this.element.discard()},u._processKey=function(e){if(this._tryFocus(),this.focusedChild&&this.focusedChild.visible&&this.focusedChild._processKey(e))return!0;var i=t.core.keyCodes[e.which||e.keyCode];if(i){var r=t.core.safeCall(this,[i,e],function(e){log("on "+i+" handler failed:",e,e.stack)}),n=this["__key__"+i];if(i in this._pressedHandlers)for(var o=this._pressedHandlers[i],s=o.length-1;s>=0;--s){var a=o[s];if(r(a))return t.core.trace.key&&log("key",i,"handled by",this,(new Error).stack),!0}n&&r(n);var n=this.__key__Key;if("Key"in this._pressedHandlers)for(var o=this._pressedHandlers.Key,s=o.length-1;s>=0;--s){var a=o[s];if(r(a))return t.core.trace.key&&log("key",i,"handled by",this,(new Error).stack),!0}n&&r(n)}else log("unknown key",e.which);return!1},i.addProperty(u,"int","x"),i.addProperty(u,"int","y"),i.addProperty(u,"int","z"),i.addProperty(u,"int","width"),i.addProperty(u,"int","height"),i.addProperty(u,"bool","clip"),i.addProperty(u,"real","radius"),i.addProperty(u,"bool","focus"),i.addProperty(u,"bool","focused"),i.addProperty(u,"bool","activeFocus"),i.addProperty(u,"Item","focusedChild"),i.addProperty(u,"bool","visible",!0),i.addProperty(u,"bool","visibleInView",!0),i.addProperty(u,"bool","recursiveVisible",!0),i.addProperty(u,"real","opacity",1),i.addProperty(u,"Anchors","anchors"),i.addProperty(u,"Effects","effects"),i.addProperty(u,"Transform","transform"),i.addProperty(u,"AnchorLine","left"),i.addProperty(u,"AnchorLine","top"),i.addProperty(u,"AnchorLine","right"),i.addProperty(u,"AnchorLine","bottom"),i.addProperty(u,"AnchorLine","horizontalCenter"),i.addProperty(u,"AnchorLine","verticalCenter"),i.addProperty(u,"int","viewX"),i.addProperty(u,"int","viewY"),t.core._protoOnChanged(u,"visible",function(e){this.recursiveVisible=e&&this.visibleInView&&this.parent.recursiveVisible,e||this.parent._tryFocus()}),t.core._protoOnChanged(u,"visibleInView",function(e){this.recursiveVisible=e&&this.visible&&this.parent.recursiveVisible}),t.core._protoOnChanged(u,"recursiveVisible",function(e){this.children.forEach(function(t){t.recursiveVisible=e&&t.visible&&t.visibleInView})}),u.__create=function(e){_.__create.call(this,e.__base={});var i=new t.core.AnchorLine(this);e.this$right=i,i.__create(e.__closure_this$right={}),this.right=i;var r=new t.core.Anchors(this);e.this$anchors=r,r.__create(e.__closure_this$anchors={}),this.anchors=r;var n=new t.core.AnchorLine(this);e.this$bottom=n,n.__create(e.__closure_this$bottom={}),this.bottom=n;var o=new t.core.AnchorLine(this);e.this$top=o,o.__create(e.__closure_this$top={}),this.top=o;var s=new t.core.AnchorLine(this);e.this$verticalCenter=s,s.__create(e.__closure_this$verticalCenter={}),this.verticalCenter=s;var a=new t.core.Transform(this);e.this$transform=a,a.__create(e.__closure_this$transform={}),this.transform=a;var c=new t.core.AnchorLine(this);e.this$horizontalCenter=c,c.__create(e.__closure_this$horizontalCenter={}),this.horizontalCenter=c;var h=new t.core.Effects(this);e.this$effects=h,h.__create(e.__closure_this$effects={}),this.effects=h;var d=new t.core.AnchorLine(this);e.this$left=d,d.__create(e.__closure_this$left={}),this.left=d},u.__setup=function(e){_.__setup.call(this,e.__base),delete e.__base;var t=e.this$right;t.__setup(e.__closure_this$right),delete e.__closure_this$right,t._removeUpdater("boxIndex"),t.boxIndex=2;var i=e.this$anchors;i.__setup(e.__closure_this$anchors),delete e.__closure_this$anchors;var r=e.this$bottom;r.__setup(e.__closure_this$bottom),delete e.__closure_this$bottom,r._removeUpdater("boxIndex"),r.boxIndex=3;var n=e.this$top;n.__setup(e.__closure_this$top),delete e.__closure_this$top,n._removeUpdater("boxIndex"),n.boxIndex=1;var o=e.this$verticalCenter;o.__setup(e.__closure_this$verticalCenter),delete e.__closure_this$verticalCenter,o._removeUpdater("boxIndex"),o.boxIndex=5;var s=e.this$transform;s.__setup(e.__closure_this$transform),delete e.__closure_this$transform;var a=e.this$horizontalCenter;a.__setup(e.__closure_this$horizontalCenter),delete e.__closure_this$horizontalCenter,a._removeUpdater("boxIndex"),a.boxIndex=4;var c=function(){this.focused=this._get("focusedChild")===this}.bind(this),h=this;this.connectOnChanged(h,"focusedChild",c),this._removeUpdater("focused",[[h,"focusedChild",c]]),c();var d=e.this$effects;d.__setup(e.__closure_this$effects),delete e.__closure_this$effects;var l=e.this$left;l.__setup(e.__closure_this$left),delete e.__closure_this$left,l._removeUpdater("boxIndex"),l.boxIndex=0};var g=t.core.Item,f=g.prototype,v=t.controls.input.BaseInput=function(e,t){g.apply(this,arguments),this._placeholderClass="",this.element.on("focus",function(){this.activeFocus=!0}.bind(this)),this.element.on("blur",function(){this.activeFocus=!1}.bind(this))},m=v.prototype=Object.create(f);m.constructor=v,m.componentName="controls.input.BaseInput",m._update=function(e,i){switch(e){case"type":this.element.dom.type=i;break;case"width":this._updateSize();break;case"height":this._updateSize();break;case"color":this.style("color",i);break;case"backgroundColor":this.style("background",i);break;case"horizontalAlignment":switch(i){case this.AlignLeft:this.style("text-align","left");break;case this.AlignRight:this.style("text-align","right");break;case this.AlignHCenter:this.style("text-align","center");break;case this.AlignJustify:this.style("text-align","justify")}}t.core.Item.prototype._update.apply(this,arguments)},m.getTag=function(){return"input"},m.registerStyle=function(e){e.addRule("input","position: absolute; visibility: inherit; border-style: solid; border-width: 0px; box-sizing: border-box;"),e.addRule("input:focus","outline: none;")},m._updateSize=function(){var e={width:this.width,height:this.height};this.style(e)},i.addProperty(m,"Paddings","paddings"),i.addProperty(m,"Color","color","#000"),i.addProperty(m,"Color","backgroundColor","#fff"),i.addProperty(m,"Font","font"),i.addProperty(m,"Border","border"),i.addProperty(m,"string","type","text"),i.addProperty(m,"PlaceHolder","placeholder"),m.AlignLeft=0,v.AlignLeft=0,m.AlignRight=1,v.AlignRight=1,m.AlignHCenter=2,v.AlignHCenter=2,m.Justify=3,v.Justify=3,i.addProperty(m,"enum","horizontalAlignment"),t.core._protoOnChanged(m,"activeFocus",function(e){e?this.element.dom.select():this.element.dom.blur()}),t.core._protoOnChanged(m,"recursiveVisible",function(e){e||this.element.dom.blur()}),m.__create=function(e){f.__create.call(this,e.__base={});var i=new t.controls.core.PlaceHolder(this);e.this$placeholder=i,i.__create(e.__closure_this$placeholder={}),this.placeholder=i;var r=new t.core.Font(this);e.this$font=r,r.__create(e.__closure_this$font={}),this.font=r;var n=new t.core.Border(this);e.this$border=n,n.__create(e.__closure_this$border={}),this.border=n;var o=new t.controls.core.Paddings(this);e.this$paddings=o,o.__create(e.__closure_this$paddings={}),this.paddings=o},m.__setup=function(e){f.__setup.call(this,e.__base),delete e.__base;var t=e.this$placeholder;t.__setup(e.__closure_this$placeholder),delete e.__closure_this$placeholder;var i=e.this$font;i.__setup(e.__closure_this$font),delete e.__closure_this$font;var r=e.this$border;r.__setup(e.__closure_this$border),delete e.__closure_this$border;var n=e.this$paddings;n.__setup(e.__closure_this$paddings),delete e.__closure_this$paddings};var y=t.controls.input.BaseInput,b=y.prototype,w=t.controls.input.ColorInput=function(e,t){y.apply(this,arguments),this.element.on("input",function(e){this.color=e.target.value}.bind(this))},x=w.prototype=Object.create(b);x.constructor=w,x.componentName="controls.input.ColorInput",x._update=function(e,i){switch(e){case"color":i!=this.element.dom.value&&(this.element.dom.value=i)}t.controls.input.BaseInput.prototype._update.apply(this,arguments)},x.__create=function(e){b.__create.call(this,e.__base={})},x.__setup=function(e){b.__setup.call(this,e.__base),delete e.__base,this._removeUpdater("width"),this.width=80,this._removeUpdater("type"),this.type="color",this._removeUpdater("height"),this.height=32};var C=t.core.Object,P=C.prototype,k=t.core.System=function(e,i){C.apply(this,arguments);var r=this._context;this.browser=t.core.browser,this.userAgent=t.core.userAgent,this.webkit=this.userAgent.toLowerCase().indexOf("webkit")>=0,this.device=t.core.device,this.vendor=t.core.vendor,this.os=t.core.os,this.language=t.core.language,r.language=this.language.replace("-","_"),this.support3dTransforms=r.backend.capabilities.csstransforms3d||!1,this.supportTransforms=r.backend.capabilities.csstransforms||!1,this.supportTransitions=r.backend.capabilities.csstransitions||!1},A=k.prototype=Object.create(P);A.constructor=k,A.componentName="core.System",A._updateLayoutType=function(){if(this.contextWidth&&this.contextHeight){var e=this.contextWidth;e<=320?this.layoutType=this.MobileS:e<=375?this.layoutType=this.MobileM:e<=425?this.layoutType=this.MobileL:e<=768?this.layoutType=this.Tablet:this.contextWidth<=1024?this.layoutType=this.Laptop:this.contextWidth<=1440?this.layoutType=this.LaptopL:this.layoutType=this.Laptop4K}},i.addProperty(A,"string","userAgent"),i.addProperty(A,"string","language"),i.addProperty(A,"string","browser"),i.addProperty(A,"string","vendor"),i.addProperty(A,"string","os"),i.addProperty(A,"bool","webkit"),i.addProperty(A,"bool","support3dTransforms"),i.addProperty(A,"bool","supportTransforms"),i.addProperty(A,"bool","supportTransitions"),i.addProperty(A,"bool","portrait"),i.addProperty(A,"bool","landscape"),i.addProperty(A,"bool","pageActive",!0),i.addProperty(A,"int","screenWidth"),i.addProperty(A,"int","screenHeight"),A.Desktop=0,k.Desktop=0,A.Tv=1,k.Tv=1,A.Mobile=2,k.Mobile=2,i.addProperty(A,"enum","device"),A.MobileS=0,k.MobileS=0,A.MobileM=1,k.MobileM=1,A.MobileL=2,k.MobileL=2,A.Tablet=3,k.Tablet=3,A.Laptop=4,k.Laptop=4,A.LaptopL=5,k.LaptopL=5,A.Laptop4K=6,k.Laptop4K=6,i.addProperty(A,"enum","layoutType"),t.core._protoOnChanged(A,"contextHeight",function(e){this._updateLayoutType()}),t.core._protoOnChanged(A,"contextWidth",function(e){this._updateLayoutType()}),A.__create=function(e){P.__create.call(this,e.__base={})},A.__setup=function(e){P.__setup.call(this,e.__base),delete e.__base;var t=function(){this.portrait=this._get("parent")._get("width")<this._get("parent")._get("height")}.bind(this),i=this._get("parent");this.connectOnChanged(i,"height",t);var r=this._get("parent");this.connectOnChanged(r,"width",t),this._removeUpdater("portrait",[[i,"height",t],[r,"width",t]]),t();var n=function(){this.landscape=!this._get("portrait")}.bind(this),o=this;this.connectOnChanged(o,"portrait",n),this._removeUpdater("landscape",[[o,"portrait",n]]),n()};var O=t.core.Object,$=O.prototype,S=t.core.Shadow=function(e,t){O.apply(this,arguments)},U=S.prototype=Object.create($);U.constructor=S,U.componentName="core.Shadow",U._getFilterStyle=function(){var e=this.x+"px "+this.y+"px "+this.blur+"px ";return this.spread>0&&(e+=this.spread+"px "),e+=t.core.normalizeColor(this.color)},U._update=function(e,i){this.parent._updateStyle(),t.core.Object.prototype._update.apply(this,arguments)},U._empty=function(){return!(this.x||this.y||this.blur||this.spread)},i.addProperty(U,"real","x"),i.addProperty(U,"real","y"),i.addProperty(U,"Color","color","black"),i.addProperty(U,"real","blur"),i.addProperty(U,"real","spread");var E=t.core.Item,I=E.prototype,z=t.core.BaseLayout=function(e,i){E.apply(this,arguments),this.count=0,this._delayedLayout=new t.core.DelayedAction(this._context,function(){this._processUpdates(),this._layout()}.bind(this))},H=z.prototype=Object.create(I);H.constructor=z,H.componentName="core.BaseLayout",H._update=function(e,t){switch(e){case"spacing":this._delayedLayout.schedule()}qml.core.Item.prototype._update.apply(this,arguments)},H._processUpdates=function(){},i.addProperty(H,"int","count"),i.addProperty(H,"int","spacing"),i.addProperty(H,"int","currentIndex"),i.addProperty(H,"int","contentWidth"),i.addProperty(H,"int","contentHeight"),i.addProperty(H,"bool","keyNavigationWraps"),i.addProperty(H,"bool","handleNavigationKeys");var M=t.core.BaseLayout,L=M.prototype,T=t.core.BaseView=function(e,i){M.apply(this,arguments),this._items=[],this._modelUpdate=new t.core.model.ModelUpdate},j=T.prototype=Object.create(L);j.constructor=T,j.componentName="core.BaseView",j.layoutFinished=t.core.createSignal("layoutFinished"),j._onRowsChanged=function(e,t){this.trace&&log("rows changed",e,t),this._modelUpdate.update(this.model,e,t),this._delayedLayout.schedule()},j._updateDelegateIndex=function(e){var i=this._items[e];i&&(i._local.model.index=e,t.core.Object.prototype._update.call(i,"_rowIndex"))},j.focusCurrent=function(){var e=this.count;if(0!=e){var t=this.currentIndex;if(t<0||t>=e)return void(this.keyNavigationWraps?this.currentIndex=(t+e)%e:this.currentIndex=t<0?0:e-1);var i=this._items[t];i&&this.focusChild(i),this.contentFollowsCurrentItem&&this.positionViewAtIndex(t)}},j._updateItems=function(e,t){for(var i=e;i<t;++i)this._updateDelegate(i)},j._createDelegate=function(e){var t=this._items;if(null===t[e]){var i=this.model.get(e);i.index=e,this._local.model=i;var r=this.delegate();return t[e]=r,r.view=this,r.element.remove(),this.content.element.append(r.element),r._local.model=i,delete this._local.model,r}},j._updateDelegate=function(e){var i=this._items[e];if(i){var r=this.model.get(e);r.index=e,i._local.model=r,t.core.Object.prototype._update.call(i,"_row")}},j._insertItems=function(e,t){var i=t-e+2,r=Array(i);r[0]=e,r[1]=0;for(var n=2;n<i;++n)r[n]=null;Array.prototype.splice.apply(this._items,r)},j._onReset=function(){var e=this.model;this.trace&&log("reset",this._items.length,e.count),this._modelUpdate.reset(e),this._delayedLayout.schedule()},j._discardItem=function(e){null!==e&&(this.focusedChild===e&&(this.focusedChild=null),e.discard())},j._onRowsRemoved=function(e,t){this.trace&&log("rows removed",e,t),this._modelUpdate.remove(this.model,e,t),this._delayedLayout.schedule()},j._onRowsInserted=function(e,t){this.trace&&log("rows inserted",e,t),this._modelUpdate.insert(this.model,e,t),this._delayedLayout.schedule()},j._removeItems=function(e,t){var i=this._items.splice(e,t-e),r=this;i.forEach(function(e){r._discardItem(e)})},j._update=function(e,i){switch(e){case"delegate":i&&(i.visible=!1)}t.core.Item.prototype._update.apply(this,arguments)},j.itemAt=function(e,t){var i=this.indexAt(e,t);return i>=0?this._items[i]:null},j._attach=function(){!this._attached&&this.model&&this.delegate&&(this.model.on("reset",this._onReset.bind(this)),this.model.on("rowsInserted",this._onRowsInserted.bind(this)),this.model.on("rowsChanged",this._onRowsChanged.bind(this)),this.model.on("rowsRemoved",this._onRowsRemoved.bind(this)),this._attached=!0,this._onReset())},j._processUpdates=function(){this._modelUpdate.apply(this),qml.core.BaseLayout.prototype._processUpdates.apply(this)},i.addProperty(j,"Object","model"),i.addProperty(j,"Item","delegate"),i.addProperty(j,"int","contentX"),i.addProperty(j,"int","contentY"),i.addProperty(j,"int","scrollingStep",0),i.addProperty(j,"int","animationDuration",0),i.addProperty(j,"bool","contentFollowsCurrentItem",!0),i.addProperty(j,"bool","pageScrolling",!1),i.addProperty(j,"bool","trace"),i.addProperty(j,"BaseViewContent","content"),j.Beginning=0,T.Beginning=0,j.Center=1,T.Center=1,j.End=2,T.End=2,j.Visible=3,T.Visible=3,j.Contain=4,T.Contain=4,j.Page=5,T.Page=5,i.addProperty(j,"enum","positionMode"),t.core._protoOnChanged(j,"contentX",function(e){this.content.x=-e}),t.core._protoOnChanged(j,"height",function(e){this._delayedLayout.schedule()}),t.core._protoOnChanged(j,"contentY",function(e){this.content.y=-e}),t.core._protoOnChanged(j,"recursiveVisible",function(e){e&&this._delayedLayout.schedule()}),t.core._protoOnChanged(j,"width",function(e){this._delayedLayout.schedule()}),t.core._protoOnChanged(j,"focusedChild",function(e){var t=this._items.indexOf(this.focusedChild);t>=0&&(this.currentIndex=t);
}),t.core._protoOnChanged(j,"currentIndex",function(e){this.focusCurrent()}),j.__create=function(e){L.__create.call(this,e.__base={});var i=new t.core.BaseViewContent(this);e.this$content=i,i.__create(e.__closure_this$content={}),this.content=i},j.__setup=function(e){L.__setup.call(this,e.__base),delete e.__base,this._removeUpdater("keyNavigationWraps"),this.keyNavigationWraps=!0,this._removeUpdater("contentWidth"),this.contentWidth=1,this._removeUpdater("contentHeight"),this.contentHeight=1,this._removeUpdater("handleNavigationKeys"),this.handleNavigationKeys=!0;var i=e.this$content;i.__setup(e.__closure_this$content),delete e.__closure_this$content;var r=new t.core.Animation(i),n={behavior_this_content_on_y:r};r.__create(n.__closure_behavior_this_content_on_y={});var r=n.behavior_this_content_on_y;r.__setup(n.__closure_behavior_this_content_on_y),delete n.__closure_behavior_this_content_on_y;var o=function(){r.duration=this._get("parent")._get("parent")._get("animationDuration")}.bind(r),s=r._get("parent")._get("parent");r.connectOnChanged(s,"animationDuration",o),r._removeUpdater("duration",[[s,"animationDuration",o]]),o(),i.setAnimation("y",r);var a=new t.core.Animation(i),c={behavior_this_content_on_x:a};a.__create(c.__closure_behavior_this_content_on_x={});var a=c.behavior_this_content_on_x;a.__setup(c.__closure_behavior_this_content_on_x),delete c.__closure_behavior_this_content_on_x;var h=function(){a.duration=this._get("parent")._get("parent")._get("animationDuration")}.bind(a),d=a._get("parent")._get("parent");a.connectOnChanged(d,"animationDuration",h),a._removeUpdater("duration",[[d,"animationDuration",h]]),h(),i.setAnimation("x",a);var l=new t.core.Animation(i),_={behavior_this_content_on_transform:l};l.__create(_.__closure_behavior_this_content_on_transform={});var l=_.behavior_this_content_on_transform;l.__setup(_.__closure_behavior_this_content_on_transform),delete _.__closure_behavior_this_content_on_transform;var p=function(){l.duration=this._get("parent")._get("parent")._get("animationDuration")}.bind(l),u=l._get("parent")._get("parent");l.connectOnChanged(u,"animationDuration",p),l._removeUpdater("duration",[[u,"animationDuration",p]]),p(),i.setAnimation("transform",l),this._context._onCompleted(function(){this._attach();var e=this._delayedLayout,t=this;this.element.on("scroll",function(e){t.contentX=t.element.dom.scrollLeft,t.contentY=t.element.dom.scrollTop}.bind(this)),e.schedule()}.bind(this))};var F=t.core.BaseView,B=F.prototype,R=t.core.Repeater=function(e,t){F.apply(this,arguments)},N=R.prototype=Object.create(B);N.constructor=R,N.componentName="core.Repeater",N._layout=function(){if(!this.recursiveVisible)return void this.layoutFinished();var e=this.model;if(!e)return void this.layoutFinished();for(var t=!1,i=this.count=e.count,r=this._items,n=0;n<i;++n){var o=r[n];o||(o=this._createDelegate(n),t=!0)}this.layoutFinished(),t&&this._context._complete()};var W=t.core.Item,V=W.prototype,D=t.core.Image=function(e,i){W.apply(this,arguments);var r=this;this._delayedLoad=new t.core.DelayedAction(this._context,function(){r._load()}),this._context.backend.initImage(this),this.load()},Y=D.prototype=Object.create(V);Y.constructor=D,Y.componentName="core.Image",Y._load=function(){this._context.backend.loadImage(this)},Y._update=function(e,i){switch(e){case"width":case"height":case"fillMode":this.load();break;case"source":this.status=i?this.Loading:this.Null,i&&this.load()}t.core.Item.prototype._update.apply(this,arguments)},Y.load=function(){this.status=0===this.source.length?t.core.Image.prototype.Null:t.core.Image.prototype.Loading,this._delayedLoad.schedule()},Y._onError=function(){this.status=this.Error},i.addProperty(Y,"string","source"),i.addProperty(Y,"int","paintedWidth"),i.addProperty(Y,"int","paintedHeight"),Y.Null=0,D.Null=0,Y.Ready=1,D.Ready=1,Y.Loading=2,D.Loading=2,Y.Error=3,D.Error=3,i.addProperty(Y,"enum","status"),Y.Stretch=0,D.Stretch=0,Y.PreserveAspectFit=1,D.PreserveAspectFit=1,Y.PreserveAspectCrop=2,D.PreserveAspectCrop=2,Y.Tile=3,D.Tile=3,Y.TileVertically=4,D.TileVertically=4,Y.TileHorizontally=5,D.TileHorizontally=5,Y.Pad=6,D.Pad=6,i.addProperty(Y,"enum","fillMode");var X=t.core.Image,q=X.prototype,K=t.controls.core.Sprite=function(e,t){X.apply(this,arguments)},J=K.prototype=Object.create(q);J.constructor=K,J.componentName="controls.core.Sprite",J._update=function(e,i){switch(e){case"offsetY":case"offsetX":this.style("background-position","-"+this.offsetX+"px -"+this.offsetY+"px")}t.core.Image.prototype._update.apply(this,arguments)},i.addProperty(J,"int","offsetX"),i.addProperty(J,"int","offsetY"),J.__create=function(e){q.__create.call(this,e.__base={})},J.__setup=function(e){q.__setup.call(this,e.__base),delete e.__base,this._removeUpdater("fillMode"),this.fillMode=t.core.Image.prototype.Tile};var Z=t.core.Object,G=Z.prototype,Q=t.core.Animation=function(e,t){Z.apply(this,arguments),this._disabled=0},ee=Q.prototype=Object.create(G);ee.constructor=Q,ee.componentName="core.Animation",ee.interpolate=function(e,t,i){return i*(e-t)+t},ee.disable=function(){++this._disabled},ee.enabled=function(){return 0==this._disabled},ee.complete=function(){},ee._update=function(e,i){var r=this.parent;this._target&&r&&r._updateAnimation&&r._updateAnimation(this._target,this.enabled()?this:null)||t.core.Object.prototype._update.apply(this,arguments)},ee.enable=function(){--this._disabled},i.addProperty(ee,"int","delay",0),i.addProperty(ee,"int","duration",200),i.addProperty(ee,"bool","cssTransition",!0),i.addProperty(ee,"bool","running",!1),i.addProperty(ee,"string","easing","ease");var te=t.core.Object,ie=te.prototype,re=t.controls.core.Paddings=function(e,t){te.apply(this,arguments)},ne=re.prototype=Object.create(ie);ne.constructor=re,ne.componentName="controls.core.Paddings",ne._update=function(e,i){switch(e){case"left":this.parent.style("padding-left",i);break;case"right":this.parent.style("padding-right",i);break;case"top":this.parent.style("padding-top",i);break;case"bottom":this.parent.style("padding-bottom",i)}t.core.Object.prototype._update.apply(this,arguments)},i.addProperty(ne,"int","left"),i.addProperty(ne,"int","right"),i.addProperty(ne,"int","top"),i.addProperty(ne,"int","bottom");var oe=t.core.Item,se=oe.prototype,ae=t.dyndef.UiIndex=function(e,t){oe.apply(this,arguments)},ce=ae.prototype=Object.create(se);ce.constructor=ae,ce.componentName="dyndef.UiIndex",ce.__create=function(e){se.__create.call(this,e.__base={});var r=new t.core.Image(this);e.this$child0=r,r.__create(e.__closure_this$child0={});var n=new t.core.Text(r);e.this_child0$child0=n,n.__create(e.__closure_this_child0$child0={});var o=new t.core.Rectangle(this);e.this$child1=o,o.__create(e.__closure_this$child1={});var s=new t.core.Text(o);e.this_child1$child0=s,s.__create(e.__closure_this_child1$child0={});var a=new t.core.HoverMixin(s);e.this_child1_child0$child0=a,a.__create(e.__closure_this_child1_child0$child0={}),o._setId("gameOver");var c=new t.core.Rectangle(this);e.this$child2=c,c.__create(e.__closure_this$child2={});var h=new t.controls.input.ColorInput(c);e.this_child2$child0=h,h.__create(e.__closure_this_child2$child0={});var d=new t.core.Text(this);e.this$child3=d,d.__create(e.__closure_this$child3={}),i.addProperty(d,"HoverMixin","hover");var l=new t.core.HoverMixin(d);e.this_child3$hover=l,l.__create(e.__closure_this_child3$hover={}),d.hover=l;var _=new t.core.Image(this);e.this$child4=_,_.__create(e.__closure_this$child4={});var p=new t.core.Text(_);e.this_child4$child0=p,p.__create(e.__closure_this_child4$child0={});var u=new t.core.Repeater(this);e.this$child5=u,u.__create(e.__closure_this$child5={}),i.addProperty(u,"bool","active"),i.addProperty(u,"int","level"),i.addProperty(u,"bool","lost");var g=new t.core.Timer(u);e.this_child5$child0=g,g.__create(e.__closure_this_child5$child0={}),i.addProperty(g,"int","countdown",5),g._setId("creator");var f=new t.core.Image(u);e.this_child5$child1=f,f.__create(e.__closure_this_child5$child1={}),i.addProperty(f,"int","health",100),f._setId("brain"),u.delegate=function(){var e=new t.dyndef.Enemy(u,!0),i={delegate:e};e.__create(i.__closure_delegate={});var e=i.delegate;e.__setup(i.__closure_delegate),delete i.__closure_delegate;var r=function(){e.name=this._get("model").name}.bind(e),n=e._get("_delegate");e.connectOnChanged(n,"_row",r),e._removeUpdater("name",[[n,"_row",r]]),r();var o=function(){e.idx=this._get("model").index}.bind(e),s=e._get("_delegate");e.connectOnChanged(s,"_rowIndex",o),e._removeUpdater("idx",[[s,"_rowIndex",o]]),o();var a=function(){e.interval=this._get("model").speed}.bind(e),c=e._get("_delegate");e.connectOnChanged(c,"_row",a),e._removeUpdater("interval",[[c,"_row",a]]),a(),e._removeUpdater("height"),e.height=181,e._removeUpdater("width"),e.width=122;var h=function(){e.state=this._get("parent")._get("lost")?t.dyndef.Enemy.prototype.Idle:this._get("x")>this._get("parent")._get("width")-150?t.dyndef.Enemy.prototype.Attack:t.dyndef.Enemy.prototype.Walk}.bind(e),d=e._get("parent");e.connectOnChanged(d,"width",h);var l=e._get("parent");e.connectOnChanged(l,"lost",h);var _=e;e.connectOnChanged(_,"x",h),e._removeUpdater("state",[[d,"width",h],[l,"lost",h],[_,"x",h]]),h(),e._removeUpdater("active"),e.active=!0;var p=function(){e.z=this._get("model").y}.bind(e),g=e._get("_delegate");e.connectOnChanged(g,"_row",p),e._removeUpdater("z",[[g,"_row",p]]),p();var f=function(){e.y=this._get("model").y}.bind(e),v=e._get("_delegate");return e.connectOnChanged(v,"_row",f),e._removeUpdater("y",[[v,"_row",f]]),f(),e.discard=function(){log("discard called",this.idx),t.core.Item.prototype.discard.apply(this)}.bind(e),e.on("triggered",function(){this.state===this.Attack?this._get("brain").health--:this.state===this.Walk&&(this.x+=this.speed)}.bind(e)),e.on("finished",function(){this.state===this.Hurt?this.state=this.Walk:this.state===this.Dead&&this.parent.model.remove(this.idx)}.bind(e)),e}.bind(u);var v=new t.core.ListModel(u);e.this_child5$model=v,v.__create(e.__closure_this_child5$model={}),u.model=v,u._setId("game")},ce.__setup=function(e){se.__setup.call(this,e.__base),delete e.__base,this._removeUpdater("clip"),this.clip=!0;var i=function(){this._get("anchors").fill=this._get("context")}.bind(this),r=this;this.connectOnChanged(r,"context",i),this._removeUpdater("anchors.fill",[[r,"context",i]]),i();var n=e.this$child0;n.__setup(e.__closure_this$child0),delete e.__closure_this$child0,n._removeUpdater("source"),n.source="res/wall.jpg",n._removeUpdater("fillMode"),n.fillMode=t.core.Image.prototype.Tile;var o=function(){n.height=.5*this._get("parent")._get("height")}.bind(n),s=n._get("parent");n.connectOnChanged(s,"height",o),n._removeUpdater("height",[[s,"height",o]]),o();var a=function(){n.width=1*this._get("parent")._get("width")}.bind(n),c=n._get("parent");n.connectOnChanged(c,"width",a),n._removeUpdater("width",[[c,"width",a]]),a();var h=e.this_child0$child0;h.__setup(e.__closure_this_child0$child0),delete e.__closure_this_child0$child0;var d=function(){h.opacity=this._get("visible")}.bind(h),l=h;h.connectOnChanged(l,"visible",d),h._removeUpdater("opacity",[[l,"visible",d]]),d(),h._removeUpdater("color"),h.color="#EEEEEE";var _=function(){h.text="Next wave start in "+this._get("creator")._get("countdown")+" sec."}.bind(h),p=h._get("creator");h.connectOnChanged(p,"countdown",_),h._removeUpdater("text",[[p,"countdown",_]]),_();var u=function(){h.visible=this._get("game")._get("active")&&this._get("creator")._get("countdown")>0}.bind(h),g=h._get("creator");h.connectOnChanged(g,"countdown",u);var f=h._get("game");h.connectOnChanged(f,"active",u),h._removeUpdater("visible",[[g,"countdown",u],[f,"active",u]]),u(),h._removeUpdater("horizontalAlignment"),h.horizontalAlignment=t.core.Text.prototype.AlignHCenter,h._removeUpdater("font.pixelSize"),h._get("font").pixelSize=42,h._removeUpdater("verticalAlignment"),h.verticalAlignment=t.core.Text.prototype.AlignVCenter;var v=function(){h._get("anchors").fill=this._get("parent")}.bind(h),m=h;h.connectOnChanged(m,"parent",v),h._removeUpdater("anchors.fill",[[m,"parent",v]]),v();var y=new t.core.Animation(h),b={behavior_this_child0_child0_on_opacity:y};y.__create(b.__closure_behavior_this_child0_child0_on_opacity={});var y=b.behavior_this_child0_child0_on_opacity;y.__setup(b.__closure_behavior_this_child0_child0_on_opacity),delete b.__closure_behavior_this_child0_child0_on_opacity,y._removeUpdater("duration"),y.duration=700,h.setAnimation("opacity",y);var w=new t.core.Animation(h),x={behavior_this_child0_child0_on_visible:w};w.__create(x.__closure_behavior_this_child0_child0_on_visible={});var w=x.behavior_this_child0_child0_on_visible;w.__setup(x.__closure_behavior_this_child0_child0_on_visible),delete x.__closure_behavior_this_child0_child0_on_visible,w._removeUpdater("duration"),w.duration=700,h.setAnimation("visible",w),n.addChild(h),this.addChild(n);var C=e.this$child1;C.__setup(e.__closure_this$child1),delete e.__closure_this$child1;var P=function(){C.opacity=this._get("visible")?.7:0}.bind(C),k=C;C.connectOnChanged(k,"visible",P),C._removeUpdater("opacity",[[k,"visible",P]]),P(),C._removeUpdater("color"),C.color="#B71C1C",C._removeUpdater("visible"),C.visible=!1;var A=function(){C.z=this._get("visible")?100:-10}.bind(C),O=C;C.connectOnChanged(O,"visible",A),C._removeUpdater("z",[[O,"visible",A]]),A();var $=function(){C._get("anchors").fill=this._get("parent")}.bind(C),S=C;C.connectOnChanged(S,"parent",$),C._removeUpdater("anchors.fill",[[S,"parent",$]]),$();var U=new t.core.Animation(C),E={behavior_this_child1_on_opacity:U};U.__create(E.__closure_behavior_this_child1_on_opacity={});var U=E.behavior_this_child1_on_opacity;U.__setup(E.__closure_behavior_this_child1_on_opacity),delete E.__closure_behavior_this_child1_on_opacity,U._removeUpdater("duration"),U.duration=1600,C.setAnimation("opacity",U);var I=new t.core.Animation(C),z={behavior_this_child1_on_visible:I};I.__create(z.__closure_behavior_this_child1_on_visible={});var I=z.behavior_this_child1_on_visible;I.__setup(z.__closure_behavior_this_child1_on_visible),delete z.__closure_behavior_this_child1_on_visible,I._removeUpdater("duration"),I.duration=1600,C.setAnimation("visible",I);var H=e.this_child1$child0;H.__setup(e.__closure_this_child1$child0),delete e.__closure_this_child1$child0,H._removeUpdater("color"),H.color="white",H._removeUpdater("font.pixelSize"),H._get("font").pixelSize=64;var M=function(){H._get("anchors").centerIn=this._get("parent")}.bind(H),L=H;H.connectOnChanged(L,"parent",M),H._removeUpdater("anchors.centerIn",[[L,"parent",M]]),M(),H._removeUpdater("text"),H.text="GEIMOVA",H.on("clicked",function(){this._get("gameOver").visible=!1}.bind(H));var T=e.this_child1_child0$child0;T.__setup(e.__closure_this_child1_child0$child0),delete e.__closure_this_child1_child0$child0,T._removeUpdater("cursor"),T.cursor="pointer",H.addChild(T),C.addChild(H),this.addChild(C);var j=e.this$child2;j.__setup(e.__closure_this$child2),delete e.__closure_this$child2,j._removeUpdater("color"),j.color="#dfe2a6";var F=function(){j.width=1*this._get("parent")._get("width")}.bind(j),B=j._get("parent");j.connectOnChanged(B,"width",F),j._removeUpdater("width",[[B,"width",F]]),F();var R=function(){j.y=.5*this._get("parent")._get("height")}.bind(j),N=j._get("parent");j.connectOnChanged(N,"height",R),j._removeUpdater("y",[[N,"height",R]]),R();var W=function(){j.height=.5*this._get("parent")._get("height")}.bind(j),V=j._get("parent");j.connectOnChanged(V,"height",W),j._removeUpdater("height",[[V,"height",W]]),W();var D=e.this_child2$child0;D.__setup(e.__closure_this_child2$child0),delete e.__closure_this_child2$child0,D._removeUpdater("z"),D.z=4,D.onChanged("color",function(e){this.parent.color=e}.bind(D)),j.addChild(D),this.addChild(j);var Y=e.this$child3;Y.__setup(e.__closure_this$child3),delete e.__closure_this$child3;var X=e.this_child3$hover;X.__setup(e.__closure_this_child3$hover),delete e.__closure_this_child3$hover,X._removeUpdater("cursor"),X.cursor="pointer";var q=function(){Y.color=this._get("hover")._get("value")?"#CDDC39":"white"}.bind(Y),K=Y._get("hover");Y.connectOnChanged(K,"value",q),Y._removeUpdater("color",[[K,"value",q]]),q();var J=function(){Y.text=this._get("game")._get("active")?"RESTART":"START"}.bind(Y),Z=Y._get("game");Y.connectOnChanged(Z,"active",J),Y._removeUpdater("text",[[Z,"active",J]]),J(),Y._removeUpdater("font.pixelSize"),Y._get("font").pixelSize=30,Y._removeUpdater("y"),Y.y=10,Y._removeUpdater("x"),Y.x=10,Y._removeUpdater("z"),Y.z=1,Y.on("clicked",function(){this._get("game").start()}.bind(Y));var G=new t.core.Animation(Y),Q={behavior_this_child3_on_color:G};G.__create(Q.__closure_behavior_this_child3_on_color={});var G=Q.behavior_this_child3_on_color;G.__setup(Q.__closure_behavior_this_child3_on_color),delete Q.__closure_behavior_this_child3_on_color,G._removeUpdater("duration"),G.duration=500,Y.setAnimation("color",G),this.addChild(Y);var ee=e.this$child4;ee.__setup(e.__closure_this$child4),delete e.__closure_this$child4,ee._removeUpdater("y"),ee.y=10,ee._removeUpdater("source"),ee.source="res/heart.png";var te=function(){ee.x=1*this._get("parent")._get("width")-this._get("width")-10}.bind(ee),ie=ee._get("parent");ee.connectOnChanged(ie,"width",te);var re=ee;ee.connectOnChanged(re,"width",te),ee._removeUpdater("x",[[ie,"width",te],[re,"width",te]]),te();var ne=e.this_child4$child0;ne.__setup(e.__closure_this_child4$child0),delete e.__closure_this_child4$child0,ne._removeUpdater("font.pixelSize"),ne._get("font").pixelSize=42,ne._removeUpdater("color"),ne.color="white";var oe=function(){ne._get("anchors").horizontalCenter=this._get("parent")._get("horizontalCenter")}.bind(ne),ae=ne._get("parent");ne.connectOnChanged(ae,"horizontalCenter",oe),ne._removeUpdater("anchors.horizontalCenter",[[ae,"horizontalCenter",oe]]),oe();var ce=function(){ne.y=1*this._get("parent")._get("height")}.bind(ne),he=ne._get("parent");ne.connectOnChanged(he,"height",ce),ne._removeUpdater("y",[[he,"height",ce]]),ce();var de=function(){ne.text=this._get("brain")._get("health")}.bind(ne),le=ne._get("brain");ne.connectOnChanged(le,"health",de),ne._removeUpdater("text",[[le,"health",de]]),de(),ee.addChild(ne),this.addChild(ee);var _e=e.this$child5;_e.__setup(e.__closure_this$child5),delete e.__closure_this$child5;var pe=function(){_e.lost=this._get("brain")._get("health")<=0}.bind(_e),ue=_e._get("brain");_e.connectOnChanged(ue,"health",pe),_e._removeUpdater("lost",[[ue,"health",pe]]),pe(),_e._removeUpdater("height"),_e.height=200;var ge=function(){_e.width=1*this._get("parent")._get("width")}.bind(_e),fe=_e._get("parent");_e.connectOnChanged(fe,"width",ge),_e._removeUpdater("width",[[fe,"width",ge]]),ge();var ve=function(){_e.y=.5*this._get("parent")._get("height")-120}.bind(_e),me=_e._get("parent");_e.connectOnChanged(me,"height",ve),_e._removeUpdater("y",[[me,"height",ve]]),ve();var ye=e.this_child5$model;ye.__setup(e.__closure_this_child5$model),delete e.__closure_this_child5$model,_e.start=function(){log("restart"),this.model.clear(),this._get("creator").interval=1e3,this._get("creator").countdown=5,this._get("brain").health=100,this.active=!0}.bind(_e),_e.onChanged("count",function(e){log("onCountChanged",e)}.bind(_e));var be=e.this_child5$child0;be.__setup(e.__closure_this_child5$child0),delete e.__closure_this_child5$child0;var we=function(){be.running=this._get("game")._get("active")&&!this._get("game")._get("lost")}.bind(be),xe=be._get("game");be.connectOnChanged(xe,"active",we);var Ce=be._get("game");be.connectOnChanged(Ce,"lost",we),be._removeUpdater("running",[[xe,"active",we],[Ce,"lost",we]]),we(),be._removeUpdater("interval"),be.interval=1e3,be._removeUpdater("triggeredOnStart"),be.triggeredOnStart=!0,be._removeUpdater("repeat"),be.repeat=!0,be.on("triggered",function(){if(log("creator onTriggered",this.countdown,this.interval),this.countdown>0)return void--this.countdown;this.interval=Math.floor(4e3*Math.random())+2e3;var e=Math.floor(60*Math.random())+70,t=Math.floor(30*Math.random()),i="zombie1";this.parent.model.append({speed:e,name:i,y:t})}.bind(be)),_e.addChild(be);var Pe=e.this_child5$child1;Pe.__setup(e.__closure_this_child5$child1),delete e.__closure_this_child5$child1,Pe._removeUpdater("source"),Pe.source="res/brain.png";var ke=function(){Pe.x=0!==this._get("health")&&this._get("game")._get("active")?1*this._get("parent")._get("width")-this._get("width")/2:1*this._get("parent")._get("width")}.bind(Pe),Ae=Pe._get("parent");Pe.connectOnChanged(Ae,"width",ke);var Oe=Pe;Pe.connectOnChanged(Oe,"width",ke);var $e=Pe;Pe.connectOnChanged($e,"health",ke);var Se=Pe._get("game");Pe.connectOnChanged(Se,"active",ke),Pe._removeUpdater("x",[[Ae,"width",ke],[Oe,"width",ke],[$e,"health",ke],[Se,"active",ke]]),ke(),Pe.onChanged("health",function(e){e||(this._get("gameOver").visible=!0)}.bind(Pe));var Ue=new t.core.Animation(Pe),Ee={behavior_this_child5_child1_on_x:Ue};Ue.__create(Ee.__closure_behavior_this_child5_child1_on_x={});var Ue=Ee.behavior_this_child5_child1_on_x;Ue.__setup(Ee.__closure_behavior_this_child5_child1_on_x),delete Ee.__closure_behavior_this_child5_child1_on_x,Ue._removeUpdater("duration"),Ue.duration=600,Pe.setAnimation("x",Ue),_e.addChild(Pe),this.addChild(_e)};var he=t.core.Object,de=he.prototype,le=t.controls.core.PlaceHolder=function(e,t){he.apply(this,arguments),this._placeholderClass=""},_e=le.prototype=Object.create(de);_e.constructor=le,_e.componentName="controls.core.PlaceHolder",_e._update=function(e,i){switch(e){case"text":this.parent.element.setAttribute("placeholder",i);break;case"color":this.setPlaceholderColor(i);break;case"fontSize":this.setPlaceholderFontSize(i)}t.core.Item.prototype._update.apply(this,arguments)},_e.setPlaceholderFontSize=function(e){var t=this.getClass(),i=["::-webkit-input-placeholder","::-moz-placeholder",":-moz-placeholder",":-ms-input-placeholder"];i.forEach(function(i){try{this._context.stylesheet._addRule("."+t+i,"font-size: "+e+"px"),log("added rule for ."+t+i)}catch(e){}}.bind(this))},_e.setPlaceholderColor=function(e){var i=this.getClass(),r=new t.core.Color(e).rgba(),n=["::-webkit-input-placeholder","::-moz-placeholder",":-moz-placeholder",":-ms-input-placeholder"];n.forEach(function(e){try{this._context.stylesheet._addRule("."+i+e,"color: "+r),log("added rule for ."+i+e)}catch(e){}}.bind(this))},_e.getClass=function(){var e;return this._placeholderClass?e=this._placeholderClass:(e=this._placeholderClass=this._context.stylesheet.allocateClass("input"),this.parent.element.addClass(e)),e},i.addProperty(_e,"string","text"),i.addProperty(_e,"Color","color"),i.addProperty(_e,"Font","font"),_e.__create=function(e){de.__create.call(this,e.__base={});var i=new t.core.Font(this);e.this$font=i,i.__create(e.__closure_this$font={}),this.font=i},_e.__setup=function(e){de.__setup.call(this,e.__base),delete e.__base;var t=e.this$font;t.__setup(e.__closure_this$font),delete e.__closure_this$font};var pe=t.core.Object,ue=pe.prototype,ge=t.core.Anchors=function(e,t){pe.apply(this,arguments)},fe=ge.prototype=Object.create(ue);fe.constructor=ge,fe.componentName="core.Anchors",fe.marginsUpdated=t.core.createSignal("marginsUpdated"),fe._updateBottom=function(){var e=this,t=e.parent,i=t.parent,r=i.toScreen(),n=e.bottom.toScreen(),o=e.topMargin||e.margins,s=e.bottomMargin||e.margins;if(e.top){var a=e.top.toScreen();t.height=n-a-s-o}t.y=n-r[1]-s-t.height-t.viewY},fe._updateTop=function(){var e=this,t=e.parent,i=t.parent,r=i.toScreen(),n=e.top.toScreen(),o=e.topMargin||e.margins,s=e.bottomMargin||e.margins;if(t.y=n+o-r[1]-t.viewY,e.bottom){var a=e.bottom.toScreen();t.height=a-n-s-o}},fe._updateRight=function(){var e=this,t=e.parent,i=t.parent,r=i.toScreen(),n=e.right.toScreen(),o=e.leftMargin||e.margins,s=e.rightMargin||e.margins;if(e.left){var a=e.left.toScreen();t.width=n-a-s-o}t.x=n-r[0]-s-t.width-t.viewX},fe._updateVCenter=function(){var e=this,t=e.parent,i=t.parent,r=i.toScreen(),n=e.verticalCenter.toScreen(),o=e.topMargin||e.margins,s=e.bottomMargin||e.margins;t.y=n-t.height/2-r[1]+o-s-t.viewY},fe._updateLeft=function(){var e=this,t=e.parent,i=t.parent,r=i.toScreen(),n=e.left.toScreen(),o=e.leftMargin||e.margins;if(t.x=n+o-r[0]-t.viewX,e.right){var s=e.right.toScreen(),a=e.rightMargin||e.margins;t.width=s-n-a-o}},fe._updateHCenter=function(){var e=this,t=e.parent,i=t.parent,r=i.toScreen(),n=e.horizontalCenter.toScreen(),o=e.leftMargin||e.margins,s=e.rightMargin||e.margins;t.x=n-t.width/2-r[0]+o-s-t.viewX},fe._update=function(e){var i=this.parent,r=this;switch(e){case"left":i._removeUpdater("x"),this.right&&i._removeUpdater("width");var n=this._updateLeft.bind(this);n(),i.connectOn(r.left.parent,"boxChanged",n),r.onChanged("leftMargin",n);break;case"right":i._removeUpdater("x"),this.left&&i._removeUpdater("width");var o=this._updateRight.bind(this);o(),i.onChanged("width",o),i.connectOn(r.right.parent,"boxChanged",o),r.onChanged("rightMargin",o);break;case"top":i._removeUpdater("y"),this.bottom&&i._removeUpdater("height");var s=this._updateTop.bind(this);s(),i.connectOn(r.top.parent,"boxChanged",s),r.onChanged("topMargin",s);break;case"bottom":i._removeUpdater("y"),this.top&&i._removeUpdater("height");var a=this._updateBottom.bind(this);a(),i.onChanged("height",a),i.connectOn(r.bottom.parent,"boxChanged",a),r.onChanged("bottomMargin",a);break;case"horizontalCenter":i._removeUpdater("x");var c=this._updateHCenter.bind(this);c(),i.onChanged("width",c),r.onChanged("leftMargin",c),r.onChanged("rightMargin",c),i.connectOn(r.horizontalCenter.parent,"boxChanged",c);break;case"verticalCenter":i._removeUpdater("y");var h=this._updateVCenter.bind(this);h(),i.onChanged("height",h),r.onChanged("topMargin",h),r.onChanged("bottomMargin",h),i.connectOn(r.verticalCenter.parent,"boxChanged",h);break;case"fill":r.left=r.fill.left,r.right=r.fill.right,r.top=r.fill.top,r.bottom=r.fill.bottom;break;case"centerIn":r.horizontalCenter=r.centerIn.horizontalCenter,r.verticalCenter=r.centerIn.verticalCenter;break;case"leftMargin":case"rightMargin":case"topMargin":case"bottomMargin":case"margins":this.marginsUpdated()}t.core.Object.prototype._update.apply(this,arguments)},i.addProperty(fe,"AnchorLine","bottom"),i.addProperty(fe,"AnchorLine","verticalCenter"),i.addProperty(fe,"AnchorLine","top"),i.addProperty(fe,"AnchorLine","left"),i.addProperty(fe,"AnchorLine","horizontalCenter"),i.addProperty(fe,"AnchorLine","right"),i.addProperty(fe,"Item","fill"),i.addProperty(fe,"Item","centerIn"),i.addProperty(fe,"int","margins"),i.addProperty(fe,"int","bottomMargin"),i.addProperty(fe,"int","topMargin"),i.addProperty(fe,"int","leftMargin"),i.addProperty(fe,"int","rightMargin");var ve=t.core.Object,me=ve.prototype,ye=t.core.Font=function(e,t){ve.apply(this,arguments)},be=ye.prototype=Object.create(me);be.constructor=ye,be.componentName="core.Font",be._update=function(e,i){switch(e){case"family":this.parent.style("font-family",i),this.parent._updateSize();break;case"pointSize":this.parent.style("font-size",i+"pt"),this.parent._updateSize();break;case"pixelSize":this.parent.style("font-size",i+"px"),this.parent._updateSize();break;case"italic":this.parent.style("font-style",i?"italic":"normal"),this.parent._updateSize();break;case"bold":this.parent.style("font-weight",i?"bold":"normal"),this.parent._updateSize();break;case"underline":this.parent.style("text-decoration",i?"underline":""),this.parent._updateSize();break;case"lineHeight":this.parent.style("line-height",i+"px"),this.parent._updateSize();break;case"weight":this.parent.style("font-weight",i),this.parent._updateSize()}t.core.Object.prototype._update.apply(this,arguments)},i.addProperty(be,"string","family"),i.addProperty(be,"bool","italic"),i.addProperty(be,"bool","bold"),i.addProperty(be,"bool","underline"),i.addProperty(be,"int","pixelSize"),i.addProperty(be,"int","pointSize"),i.addProperty(be,"int","lineHeight"),i.addProperty(be,"int","weight");var we=t.core.Object,xe=we.prototype,Ce=t.core.Border=function(e,t){we.apply(this,arguments)},Pe=Ce.prototype=Object.create(xe);Pe.constructor=Ce,Pe.componentName="core.Border",Pe._update=function(e,i){switch(e){case"width":this.parent.style({"border-width":i,"margin-left":-i,"margin-top":-i});break;case"color":this.parent.style("border-color",t.core.normalizeColor(i));break;case"style":this.parent.style("border-style",i)}t.core.Object.prototype._update.apply(this,arguments)},i.addProperty(Pe,"int","width"),i.addProperty(Pe,"color","color"),i.addProperty(Pe,"string","style"),i.addProperty(Pe,"BorderSide","left"),i.addProperty(Pe,"BorderSide","right"),i.addProperty(Pe,"BorderSide","top"),i.addProperty(Pe,"BorderSide","bottom"),Pe.__create=function(e){xe.__create.call(this,e.__base={});var i=new t.core.BorderSide(this);e.this$top=i,i.__create(e.__closure_this$top={}),this.top=i;var r=new t.core.BorderSide(this);e.this$right=r,r.__create(e.__closure_this$right={}),this.right=r;var n=new t.core.BorderSide(this);e.this$bottom=n,n.__create(e.__closure_this$bottom={}),this.bottom=n;var o=new t.core.BorderSide(this);e.this$left=o,o.__create(e.__closure_this$left={}),this.left=o},Pe.__setup=function(e){xe.__setup.call(this,e.__base),delete e.__base;var t=e.this$top;t.__setup(e.__closure_this$top),delete e.__closure_this$top,t._removeUpdater("name"),t.name="top";var i=e.this$right;i.__setup(e.__closure_this$right),delete e.__closure_this$right,i._removeUpdater("name"),i.name="right";var r=e.this$bottom;r.__setup(e.__closure_this$bottom),delete e.__closure_this$bottom,r._removeUpdater("name"),r.name="bottom";var n=e.this$left;n.__setup(e.__closure_this$left),delete e.__closure_this$left,n._removeUpdater("name"),n.name="left"};var ke=t.core.Object,Ae=ke.prototype,Oe=t.core.BorderSide=function(e,t){ke.apply(this,arguments)},$e=Oe.prototype=Object.create(Ae);$e.constructor=Oe,$e.componentName="core.BorderSide",$e._update=function(e,i){switch(e){case"width":this._updateStyle();break;case"color":this._updateStyle()}t.core.Object.prototype._update.apply(this,arguments)},$e._updateStyle=function(){if(this.parent&&this.parent.parent){var e=this.parent.parent;if(e){var i="border-"+this.name;this.width?e.style(i,this.width+"px solid "+t.core.normalizeColor(this.color)):e.style(i,"")}}},i.addProperty($e,"string","name"),i.addProperty($e,"int","width"),i.addProperty($e,"color","color");var Se=t.core.Object,Ue=Se.prototype,Ee=t.core.Timer=function(e,t){Se.apply(this,arguments)},Ie=Ee.prototype=Object.create(Ue);Ie.constructor=Ee,Ie.componentName="core.Timer",Ie.triggered=t.core.createSignal("triggered"),Ie.start=function(){var e=this.running;this.running=!0,this.triggeredOnStart&&!e&&this._emitTriggered()},Ie.restart=function(){this._restart(),this.running=!0},Ie._update=function(e,i){switch(e){case"running":this._restart();break;case"interval":this._restart();break;case"repeat":this._restart()}t.core.Object.prototype._update.apply(this,arguments)},Ie._restart=function(){if(this._timeout&&(clearTimeout(this._timeout),this._timeout=void 0),this._interval&&(clearTimeout(this._interval),this._interval=void 0),this.running){var e=this;this.repeat?this._interval=setInterval(function(){e.triggered()},this.interval):this._timeout=setTimeout(function(){e.triggered()},this.interval)}},Ie.stop=function(){this.running=!1},i.addProperty(Ie,"int","interval",1e3),i.addProperty(Ie,"bool","repeat"),i.addProperty(Ie,"bool","running"),i.addProperty(Ie,"bool","triggeredOnStart"),t.core._protoOnChanged(Ie,"running",function(e){e&&this.triggeredOnStart&&this.triggered()}),t.core._protoOn(Ie,"triggered",function(){this.repeat||(this.running=!1)}),Ie.__create=function(e){Ue.__create.call(this,e.__base={})},Ie.__setup=function(e){Ue.__setup.call(this,e.__base),delete e.__base,this._context._onCompleted(function(){this.running&&this.triggeredOnStart&&this.triggered()}.bind(this))};var ze=t.core.Object,He=ze.prototype,Me=t.core.Effects=function(e,t){ze.apply(this,arguments)},Le=Me.prototype=Object.create(He);Le.constructor=Me,Le.componentName="core.Effects",Le._getFilterStyle=function(){
var e=[];return this._addStyle(e,"blur","blur","px"),this._addStyle(e,"grayscale"),this._addStyle(e,"sepia"),this._addStyle(e,"brightness"),this._addStyle(e,"contrast"),this._addStyle(e,"hueRotate","hue-rotate","deg"),this._addStyle(e,"invert"),this._addStyle(e,"saturate"),e},Le._update=function(e,i){this._updateStyle(),t.core.Object.prototype._update.apply(this,arguments)},Le._addStyle=function(e,t,i,r){var n=this[t];n&&e.push((i||t)+"("+n+(r||"")+") ")},Le._updateStyle=function(){var e=this._getFilterStyle().join(""),t=this.parent,i={},r=!1;e.length>0&&(i["-webkit-filter"]=e,i.filter=e,r=!0),this.shadow&&!this.shadow._empty()&&(i["box-shadow"]=this.shadow._getFilterStyle(),r=!0),r&&t.style(i)},i.addProperty(Le,"real","blur"),i.addProperty(Le,"real","grayscale"),i.addProperty(Le,"real","sepia"),i.addProperty(Le,"real","brightness"),i.addProperty(Le,"real","contrast"),i.addProperty(Le,"real","hueRotate"),i.addProperty(Le,"real","invert"),i.addProperty(Le,"real","saturate"),i.addProperty(Le,"Shadow","shadow"),Le.__create=function(e){He.__create.call(this,e.__base={});var i=new t.core.Shadow(this);e.this$shadow=i,i.__create(e.__closure_this$shadow={}),this.shadow=i},Le.__setup=function(e){He.__setup.call(this,e.__base),delete e.__base;var t=e.this$shadow;t.__setup(e.__closure_this$shadow),delete e.__closure_this$shadow};var Te=t.core.Object,je=Te.prototype,Fe=t.controls.mixins.DragMixin=function(e,t){Te.apply(this,arguments),this.element=this.parent.element,this._bindPressed(this.enabled)},Be=Fe.prototype=Object.create(je);Be.constructor=Fe,Be.componentName="controls.mixins.DragMixin",Be._bindPressed=function(e){e&&!this._dmPressBinder&&(this._dmPressBinder=new t.core.EventBinder(this.element),this._dmPressBinder.on("mousedown",this._downHandler.bind(this)),this._dmPressBinder.on("touchstart",this._downHandler.bind(this))),this._dmPressBinder&&this._dmPressBinder.enable(e)},Be._downHandler=function(e){e.preventDefault(),this.pressed=!0,e.changedTouches&&(e=e.changedTouches[0]),this._startX=e.clientX-this.parent.x,this._startY=e.clientY-this.parent.y,this._dmMoveBinder||(this._dmMoveBinder=new t.core.EventBinder(this._get("context").window),this._dmMoveBinder.on("mousemove",this._moveHandler.bind(this)),this._dmMoveBinder.on("touchmove",this._moveHandler.bind(this)),this._dmMoveBinder.on("mouseup",function(){this.pressed=!1,this._dmMoveBinder.enable(!1)}.bind(this)),this._dmMoveBinder.on("touchend",function(){this.pressed=!1,this._dmMoveBinder.enable(!1)}.bind(this))),this._dmMoveBinder.enable(!0)},Be._moveHandler=function(e){if(e.preventDefault(),e.changedTouches&&(e=e.changedTouches[0]),this.direction!==this.Horizontal){var t=e.clientY,i=this._startY,r=this.top,n=this.bottom;n&&t-i>n?this.parent.y=n:r&&t-i<r?this.parent.y=r:(this.moved=!0,this.parent.y=t-i)}if(this.direction!==this.Vertical){var o=e.clientX,s=this._startX,a=this.left,c=this.right;c&&o-s>c?this.parent.x=c:a&&o-s<a?this.parent.x=a:(this.moved=!0,this.parent.x=o-s)}},i.addProperty(Be,"bool","moved"),i.addProperty(Be,"bool","pressed"),i.addProperty(Be,"bool","enabled",!0),i.addProperty(Be,"int","top"),i.addProperty(Be,"int","left"),i.addProperty(Be,"int","right"),i.addProperty(Be,"int","bottom"),Be.Any=0,Fe.Any=0,Be.Vertical=1,Fe.Vertical=1,Be.Horizontal=2,Fe.Horizontal=2,i.addProperty(Be,"enum","direction"),t.core._protoOnChanged(Be,"enabled",function(e){this._bindPressed(e)});var Re=t.core.Object,Ne=Re.prototype,We=t.core.HoverMixin=function(e,t){Re.apply(this,arguments),this.element=this.parent.element,this.parent.style("cursor",this.cursor),this._bindClick(this.clickable),this._bindHover(this.enabled),this._bindActiveHover(this.activeHoverEnabled)},Ve=We.prototype=Object.create(Ne);Ve.constructor=We,Ve.componentName="core.HoverMixin",Ve._bindActiveHover=function(e){e&&!this._hmActiveHoverBinder&&(this._hmActiveHoverBinder=new t.core.EventBinder(this.parent.element),this._hmActiveHoverBinder.on("mouseover",function(){this.activeHover=!0}.bind(this)),this._hmActiveHoverBinder.on("mouseout",function(){this.activeHover=!1}.bind(this))),this._hmActiveHoverBinder&&this._hmActiveHoverBinder.enable(e)},Ve._bindClick=function(e){e&&!this._hmClickBinder&&(this._hmClickBinder=new t.core.EventBinder(this.element),this._hmClickBinder.on("click",t.core.createSignalForwarder(this.parent,"clicked").bind(this))),this._hmClickBinder&&this._hmClickBinder.enable(e)},Ve._bindHover=function(e){e&&!this._hmHoverBinder&&(this._hmHoverBinder=new t.core.EventBinder(this.parent.element),this._hmHoverBinder.on("mouseenter",function(){this.value=!0}.bind(this)),this._hmHoverBinder.on("mouseleave",function(){this.value=!1}.bind(this))),this._hmHoverBinder&&this._hmHoverBinder.enable(e)},i.addProperty(Ve,"bool","enabled",!0),i.addProperty(Ve,"bool","clickable",!0),i.addProperty(Ve,"bool","activeHoverEnabled",!1),i.addProperty(Ve,"bool","value"),i.addProperty(Ve,"bool","activeHover",!1),i.addProperty(Ve,"string","cursor"),t.core._protoOnChanged(Ve,"clickable",function(e){this._bindClick(e)}),t.core._protoOnChanged(Ve,"cursor",function(e){this.parent.style("cursor",e)}),t.core._protoOnChanged(Ve,"activeHoverEnabled",function(e){this._bindActiveHover(e)}),t.core._protoOnChanged(Ve,"enabled",function(e){this._bindHover(e)});var De=t.core.Item,Ye=De.prototype,Xe=t.core.Context=function(e,i){De.apply(this,arguments),this.options=arguments[2],this.l10n=this.options.l10n||{},this._local.context=this,this._prefix=this.options.prefix,this._context=this,this._started=!1,this._completed=!1,this._completedHandlers=[],this._delayedActions=[],this._stylesRegistered={},this.backend=t._backend()},qe=Xe.prototype=Object.create(Ye);qe.constructor=Xe,qe.componentName="core.Context",qe.qsTr=function(e){var t=arguments,i=this.language,r=this.l10n[i]||{},n=r[e]||{};for(var o in n){e=n[o];break}return e.replace(/%(\d+)/,function(e,i){return t[i]})},qe.createElement=function(e){var t=this.backend.createElement(this,e);return this._prefix&&t.addClass(this.getClass("core-item")),t},qe.registerStyle=function(e,t){t in this._stylesRegistered||(e.registerStyle(this.stylesheet,t),this._stylesRegistered[t]=!0)},qe.run=function(){this.backend.run(this)},qe.init=function(){log("Context: initializing..."),new this.backend.init(this)},qe._run=function(){log("Context: calling completed()"),this._complete(),this.style("visibility","visible")},qe.start=function(e){var t={};return e.__create(t),e.__setup(t),t=void 0,log("Context: created instance"),this._started=!0,log("Context: signalling layout"),this.boxChanged(),log("Context: done"),e},qe._complete=function(){if(this._started&&!this._runningComplete){this._completed=!0,this._runningComplete=!0;var e=t.core.safeCall(this,[],function(e){log("onCompleted failed:",e,e.stack)});do{for(;this._completedHandlers.length;){var i=this._completedHandlers;this._completedHandlers=[],i.forEach(e)}this._processActions()}while(this._completedHandlers.length);this._runningComplete=!1}},qe.getClass=function(e){return this._prefix+e},qe._update=function(e,i){switch(e){case"fullscreen":i?this.backend.enterFullscreenMode(this.element):this.backend.exitFullscreenMode()}t.core.Item.prototype._update.apply(this,arguments)},qe.scheduleAction=function(e){this._delayedActions.push(e),this._completed&&void 0===this._delayedTimeout&&(this._delayedTimeout=setTimeout(this._processActions.bind(this),0))},qe._onCompleted=function(e){this._completedHandlers.push(e)},qe._processActions=function(){for(var e=t.core.safeCall(this,[],function(e){log("exception in delayed action",e,e.stack)});this._delayedActions.length;){var i=this._delayedActions;this._delayedActions=[],i.forEach(e)}this._delayedTimeout=void 0},i.addProperty(qe,"bool","fullscreen"),i.addProperty(qe,"int","scrollY"),i.addProperty(qe,"Stylesheet","stylesheet"),i.addProperty(qe,"System","system"),i.addProperty(qe,"Location","location"),i.addProperty(qe,"Orientation","orientation"),i.addProperty(qe,"string","language"),qe.__create=function(e){Ye.__create.call(this,e.__base={});var i=new t.html5.Orientation(this);e.this$orientation=i,i.__create(e.__closure_this$orientation={}),this.orientation=i;var r=new t.html5.Stylesheet(this);e.this$stylesheet=r,r.__create(e.__closure_this$stylesheet={}),this.stylesheet=r;var n=new t.core.System(this);e.this$system=n,n.__create(e.__closure_this$system={}),this.system=n;var o=new t.html5.Location(this);e.this$location=o,o.__create(e.__closure_this$location={}),this.location=o},qe.__setup=function(e){Ye.__setup.call(this,e.__base),delete e.__base;var t=e.this$orientation;t.__setup(e.__closure_this$orientation),delete e.__closure_this$orientation;var i=e.this$stylesheet;i.__setup(e.__closure_this$stylesheet),delete e.__closure_this$stylesheet;var r=e.this$system;r.__setup(e.__closure_this$system),delete e.__closure_this$system;var n=e.this$location;n.__setup(e.__closure_this$location),delete e.__closure_this$location};var Ke=t.core.Item,Je=Ke.prototype,Ze=t.core.Text=function(e,i){Ke.apply(this,arguments),this._context.backend.initText(this),this._setText(this.text);var r=this;this._delayedUpdateSize=new t.core.DelayedAction(this._context,function(){r._updateSizeImpl()})},Ge=Ze.prototype=Object.create(Je);Ge.constructor=Ze,Ge.componentName="core.Text",Ge.on=function(e,i){this._updateSizeNeeded||"boxChanged"==e&&this._enableSizeUpdate(),t.core.Object.prototype.on.apply(this,arguments)},Ge.onChanged=function(e,i){if(!this._updateSizeNeeded)switch(e){case"right":case"width":case"bottom":case"height":case"verticalCenter":case"horizontalCenter":this._enableSizeUpdate()}t.core.Object.prototype.onChanged.apply(this,arguments)},Ge._enableSizeUpdate=function(){this._updateSizeNeeded=!0,this._updateSize()},Ge._setText=function(e){this.element.setHtml(e)},Ge._update=function(e,i){switch(e){case"text":this._setText(i),this._updateSize();break;case"color":this.style("color",t.core.normalizeColor(i));break;case"width":this._updateSize();break;case"verticalAlignment":this.verticalAlignment=i,this._enableSizeUpdate();break;case"horizontalAlignment":switch(i){case this.AlignLeft:this.style("text-align","left");break;case this.AlignRight:this.style("text-align","right");break;case this.AlignHCenter:this.style("text-align","center");break;case this.AlignJustify:this.style("text-align","justify")}break;case"wrapMode":switch(i){case this.NoWrap:this.style({"white-space":"nowrap","word-break":""});break;case this.Wrap:case this.WordWrap:this.style({"white-space":"normal","word-break":""});break;case this.WrapAnywhere:this.style({"white-space":"normal","word-break":"break-all"})}this._updateSize()}t.core.Item.prototype._update.apply(this,arguments)},Ge._updateSizeImpl=function(){return 0===this.text.length?(this.paintedWidth=0,void(this.paintedHeight=0)):void this._context.backend.layoutText(this)},Ge._updateStyle=function(){this.shadow&&!this.shadow._empty()?this.style("text-shadow",this.shadow._getFilterStyle()):this.style("text-shadow",""),t.core.Item.prototype._updateStyle.apply(this,arguments)},Ge._updateSize=function(){this._updateSizeNeeded&&this._delayedUpdateSize.schedule()},i.addProperty(Ge,"string","text"),i.addProperty(Ge,"color","color"),i.addProperty(Ge,"Shadow","shadow"),i.addProperty(Ge,"Font","font"),i.addProperty(Ge,"int","paintedWidth"),i.addProperty(Ge,"int","paintedHeight"),Ge.AlignTop=0,Ze.AlignTop=0,Ge.AlignBottom=1,Ze.AlignBottom=1,Ge.AlignVCenter=2,Ze.AlignVCenter=2,i.addProperty(Ge,"enum","verticalAlignment"),Ge.AlignLeft=0,Ze.AlignLeft=0,Ge.AlignRight=1,Ze.AlignRight=1,Ge.AlignHCenter=2,Ze.AlignHCenter=2,Ge.AlignJustify=3,Ze.AlignJustify=3,i.addProperty(Ge,"enum","horizontalAlignment"),Ge.NoWrap=0,Ze.NoWrap=0,Ge.WordWrap=1,Ze.WordWrap=1,Ge.WrapAnywhere=2,Ze.WrapAnywhere=2,Ge.Wrap=3,Ze.Wrap=3,i.addProperty(Ge,"enum","wrapMode"),Ge.__create=function(e){Je.__create.call(this,e.__base={});var i=new t.core.Shadow(this);e.this$shadow=i,i.__create(e.__closure_this$shadow={}),this.shadow=i;var r=new t.core.Font(this);e.this$font=r,r.__create(e.__closure_this$font={}),this.font=r},Ge.__setup=function(e){Je.__setup.call(this,e.__base),delete e.__base;var t=function(){this.width=this._get("paintedWidth")}.bind(this),i=this;this.connectOnChanged(i,"paintedWidth",t),this._removeUpdater("width",[[i,"paintedWidth",t]]),t();var r=e.this$shadow;r.__setup(e.__closure_this$shadow),delete e.__closure_this$shadow;var n=e.this$font;n.__setup(e.__closure_this$font),delete e.__closure_this$font;var o=function(){this.height=this._get("paintedHeight")}.bind(this),s=this;this.connectOnChanged(s,"paintedHeight",o),this._removeUpdater("height",[[s,"paintedHeight",o]]),o()};var Qe=t.core.Object,et=Qe.prototype,tt=t.core.Transform=function(e,t){Qe.apply(this,arguments),this._transforms={}},it=tt.prototype=Object.create(et);it.constructor=tt,it.componentName="core.Transform",it._update=function(e,i){switch(e){case"perspective":this._transforms.perspective=i+"px";break;case"translateX":this._transforms.translateX=i+"px";break;case"translateY":this._transforms.translateY=i+"px";break;case"translateZ":this._transforms.translateZ=i+"px";break;case"rotateX":this._transforms.rotateX=i+"deg";break;case"rotateY":this._transforms.rotateY=i+"deg";break;case"rotateZ":this._transforms.rotateZ=i+"deg";break;case"rotate":this._transforms.rotate=i+"deg";break;case"scaleX":this._transforms.scaleX=i;break;case"scaleY":this._transforms.scaleY=i;break;case"skewX":this._transforms.skewX=i+"deg";break;case"skewY":this._transforms.skewY=i+"deg"}var r="";for(var n in this._transforms)r+=n,r+="("+this._transforms[n]+") ";this.parent.style("transform",r),t.core.Object.prototype._update.apply(this,arguments)},i.addProperty(it,"int","perspective"),i.addProperty(it,"int","translateX"),i.addProperty(it,"int","translateY"),i.addProperty(it,"int","translateZ"),i.addProperty(it,"real","rotateX"),i.addProperty(it,"real","rotateY"),i.addProperty(it,"real","rotateZ"),i.addProperty(it,"real","rotate"),i.addProperty(it,"real","scaleX"),i.addProperty(it,"real","scaleY"),i.addProperty(it,"real","skewX"),i.addProperty(it,"real","skewY");var rt=t.controls.core.Sprite,nt=rt.prototype,ot=t.controls.core.AnimatedSprite=function(e,t){rt.apply(this,arguments)},st=ot.prototype=Object.create(nt);st.constructor=ot,st.componentName="controls.core.AnimatedSprite",st.finished=t.core.createSignal("finished"),st.triggered=t.core.createSignal("triggered"),st._start=function(){if(this._interval&&(clearInterval(this._interval),this._interval=void 0),this.running&&this.status==this.Ready){var e=this;e.repeat?e._interval=setInterval(function(){e.currentFrame=++e.currentFrame%e.totalFrames,e.triggered()},e.interval):(e._countdown=e.totalFrames-e.currentFrame,e._interval=setInterval(function(){0===e._countdown?(clearInterval(e._interval),e.running=!1,e.finished()):(--e._countdown,e.currentFrame=++e.currentFrame%e.totalFrames,e.triggered())},e.interval))}},st.stop=function(){this.currentFrame=0,this.running=!1},st.start=function(){this.running=!0},st.restart=function(){this.currentFrame=0,this.running=!0},st.pause=function(){this.running=!1},st._update=function(e,i){switch(e){case"totalFrames":case"interval":case"running":case"duration":case"repeat":case"status":this._start()}t.controls.core.Sprite.prototype._update.apply(this,arguments)},i.addProperty(st,"int","totalFrames"),i.addProperty(st,"int","currentFrame"),i.addProperty(st,"int","duration"),i.addProperty(st,"bool","repeat"),i.addProperty(st,"bool","running"),i.addProperty(st,"int","interval"),t.core._protoOnChanged(st,"currentFrame",function(e){var t=this.paintedWidth,i=this.width,r=Math.floor(t/i),n=e%r,o=Math.floor(e/r);this.offsetX=n*i,this.offsetY=o*this.height}),st.__create=function(e){nt.__create.call(this,e.__base={})},st.__setup=function(e){nt.__setup.call(this,e.__base),delete e.__base;var t=function(){this.interval=this._get("duration")/this._get("totalFrames")}.bind(this),i=this;this.connectOnChanged(i,"totalFrames",t);var r=this;this.connectOnChanged(r,"duration",t),this._removeUpdater("interval",[[i,"totalFrames",t],[r,"duration",t]]),t(),this._context._onCompleted(function(){this.running&&this._start()}.bind(this))};var at=t.controls.core.AnimatedSprite,ct=at.prototype,ht=t.dyndef.Enemy=function(e,t){at.apply(this,arguments)},dt=ht.prototype=Object.create(ct);dt.constructor=ht,dt.componentName="dyndef.Enemy",i.addProperty(dt,"int","health",100),i.addProperty(dt,"int","speed",5),i.addProperty(dt,"bool","active"),i.addProperty(dt,"string","name"),i.addProperty(dt,"DragMixin","drag"),i.addProperty(dt,"int","idx"),dt.Idle=0,ht.Idle=0,dt.Walk=1,ht.Walk=1,dt.Attack=2,ht.Attack=2,dt.Hurt=3,ht.Hurt=3,dt.Dead=4,ht.Dead=4,i.addProperty(dt,"enum","state"),t.core._protoOnChanged(dt,"state",function(e){switch(e){case this.Idle:this.repeat=!0,this.width=117,this.source="res/szombie1i.png",this.totalFrames=4;break;case this.Attack:this.repeat=!0,this.width=122,this.totalFrames=6,this.source="res/szombie1a.png";break;case this.Walk:this.repeat=!0,this.width=122,this.totalFrames=6,this.source="res/szombie1w.png";break;case this.Hurt:this.repeat=!1,this.width=136,this.totalFrames=5,this.source="res/szombie1h.png";break;case this.Dead:this.repeat=!1,this.width=136,this.totalFrames=15,this.source="res/szombie1h.png"}this.restart()}),t.core._protoOnChanged(dt,"health",function(e){return log("onHealthChanged",e),e>0?void(this.state=this.Hurt):void(this.state=t.dyndef.Enemy.prototype.Dead)}),t.core._protoOn(dt,"clicked",function(){this.drag.moved?this.drag.moved=!1:this.health-=30}),dt.__create=function(e){ct.__create.call(this,e.__base={});var i=new t.core.HoverMixin(this);e.this$child0=i,i.__create(e.__closure_this$child0={});var r=new t.core.Rectangle(this);e.this$child1=r,r.__create(e.__closure_this$child1={});var n=new t.core.Rectangle(r);e.this_child1$child0=n,n.__create(e.__closure_this_child1$child0={});var o=new t.controls.mixins.DragMixin(this);e.this$drag=o,o.__create(e.__closure_this$drag={}),this.drag=o},dt.__setup=function(e){ct.__setup.call(this,e.__base),delete e.__base;var i=function(){this.interval=this._get("model").speed}.bind(this),r=this._get("_delegate");this.connectOnChanged(r,"_row",i),this._removeUpdater("interval",[[r,"_row",i]]),i();var n=e.this$drag;n.__setup(e.__closure_this$drag),delete e.__closure_this$drag,n._removeUpdater("direction"),n.direction=t.controls.mixins.DragMixin.prototype.Horizontal;var o=function(){n.enabled=this._get("parent")._get("state")!==t.dyndef.Enemy.prototype.Dead}.bind(n),s=n._get("parent");n.connectOnChanged(s,"state",o),n._removeUpdater("enabled",[[s,"state",o]]),o(),this._removeUpdater("height"),this.height=181,this._removeUpdater("width"),this.width=121;var a=function(){this.running=this._get("active")&&!this._get("drag")._get("pressed")}.bind(this),c=this._get("drag");this.connectOnChanged(c,"pressed",a);var h=this;this.connectOnChanged(h,"active",a),this._removeUpdater("running",[[c,"pressed",a],[h,"active",a]]),a(),this._removeUpdater("totalFrames"),this.totalFrames=6,this._removeUpdater("duration"),this.duration=480;var d=new t.core.Animation(this),l={behavior_this_on_x:d};d.__create(l.__closure_behavior_this_on_x={});var d=l.behavior_this_on_x;d.__setup(l.__closure_behavior_this_on_x),delete l.__closure_behavior_this_on_x;var _=function(){d.duration=this._get("parent")._get("drag")._get("pressed")||this._get("parent")._get("active")?0:this._get("parent")._get("duration")/this._get("parent")._get("totalFrames")}.bind(d),p=d._get("parent");d.connectOnChanged(p,"active",_);var u=d._get("parent");d.connectOnChanged(u,"duration",_);var g=d._get("parent")._get("drag");d.connectOnChanged(g,"pressed",_);var f=d._get("parent");d.connectOnChanged(f,"totalFrames",_),d._removeUpdater("duration",[[p,"active",_],[u,"duration",_],[g,"pressed",_],[f,"totalFrames",_]]),_(),this.setAnimation("x",d);var v=e.this$child0;v.__setup(e.__closure_this$child0),delete e.__closure_this$child0,v._removeUpdater("cursor"),v.cursor="move";var m=function(){v.clickable=this._get("enabled")}.bind(v),y=v;v.connectOnChanged(y,"enabled",m),v._removeUpdater("clickable",[[y,"enabled",m]]),m();var b=function(){v.enabled=this._get("parent")._get("state")!==t.dyndef.Enemy.prototype.Dead}.bind(v),w=v._get("parent");v.connectOnChanged(w,"state",b),v._removeUpdater("enabled",[[w,"state",b]]),b(),this.addChild(v);var x=e.this$child1;x.__setup(e.__closure_this$child1),delete e.__closure_this$child1;var C=function(){x.visible=this._get("parent")._get("health")<100}.bind(x),P=x._get("parent");x.connectOnChanged(P,"health",C),x._removeUpdater("visible",[[P,"health",C]]),C(),x._removeUpdater("color"),x.color="#EEEEEE",x._removeUpdater("height"),x.height=2,x._removeUpdater("width"),x.width=50,x._removeUpdater("y"),x.y=-2,x._removeUpdater("x"),x.x=35;var k=e.this_child1$child0;k.__setup(e.__closure_this_child1$child0),delete e.__closure_this_child1$child0;var A=function(){k.color=this._get("parent")._get("parent")._get("health")>40?"#66BB6A":"red"}.bind(k),O=k._get("parent")._get("parent");k.connectOnChanged(O,"health",A),k._removeUpdater("color",[[O,"health",A]]),A();var $=function(){k.width=this._get("parent")._get("parent")._get("health")/2}.bind(k),S=k._get("parent")._get("parent");k.connectOnChanged(S,"health",$),k._removeUpdater("width",[[S,"health",$]]),$(),k._removeUpdater("height"),k.height=2,x.addChild(k),this.addChild(x)};var lt=t.core.Object,_t=lt.prototype,pt=t.core.ListModel=function(e,t){lt.apply(this,arguments),this._rows=[]},ut=pt.prototype=Object.create(_t);ut.constructor=pt,ut.componentName="core.ListModel",ut.reset=t.core.createSignal("reset"),ut.rowsChanged=t.core.createSignal("rowsChanged"),ut.rowsRemoved=t.core.createSignal("rowsRemoved"),ut.rowsInserted=t.core.createSignal("rowsInserted"),ut.insert=function(e,t){if(e<0||e>this._rows.length)throw new Error("index "+e+" out of bounds ("+this._rows.length+")");this._rows.splice(e,0,t),this.count=this._rows.length,this.rowsInserted(e,e+1)},ut.addChild=function(e){this.append(e)},ut.remove=function(e,t){if(e<0||e>=this._rows.length)throw new Error("index "+e+" out of bounds");void 0===t&&(t=1),this._rows.splice(e,t),this.count=this._rows.length,this.rowsRemoved(e,e+t)},ut.setProperty=function(e,t,i){if(e<0||e>=this._rows.length)throw new Error("index "+e+" out of bounds ("+this._rows.length+")");var r=this._rows[e];if(!(r instanceof Object))throw new Error("row is non-object, invalid index? ("+e+")");r[t]!==i&&(r[t]=i,this.rowsChanged(e,e+1))},ut.get=function(e){if(e<0||e>=this._rows.length)throw new Error("index "+e+" out of bounds ("+this._rows.length+")");var t=this._rows[e];if(!(t instanceof Object))throw new Error("row is non-object");return t.index=e,t},ut.clear=function(){this.assign([])},ut.append=function(e){var t=this._rows.length;Array.isArray(e)?(Array.prototype.push.apply(this._rows,e),this.count=this._rows.length,this.rowsInserted(t,t+e.length)):(this._rows.push(e),this.count=this._rows.length,this.rowsInserted(t,t+1))},ut.set=function(e,t){if(e<0||e>=this._rows.length)throw new Error("index "+e+" out of bounds ("+this._rows.length+")");if(!(t instanceof Object))throw new Error("row is non-object");this._rows[e]=t,this.rowsChanged(e,e+1)},ut.assign=function(e){this._rows=e,this.count=this._rows.length,this.reset()},i.addProperty(ut,"int","count");var gt=t.core.Item,ft=gt.prototype,vt=t.core.Rectangle=function(e,t){gt.apply(this,arguments)},mt=vt.prototype=Object.create(ft);mt.constructor=vt,mt.componentName="core.Rectangle",mt._update=function(e,i){switch(e){case"color":this.style("background-color",t.core.normalizeColor(i))}t.core.Item.prototype._update.apply(this,arguments)},mt._mapCSSAttribute=function(e){var i={color:"background-color"}[e];return void 0!==i?i:t.core.Item.prototype._mapCSSAttribute.apply(this,arguments)},i.addProperty(mt,"color","color","#0000"),i.addProperty(mt,"Border","border"),i.addProperty(mt,"Gradient","gradient"),mt.__create=function(e){ft.__create.call(this,e.__base={});var i=new t.core.Border(this);e.this$border=i,i.__create(e.__closure_this$border={}),this.border=i},mt.__setup=function(e){ft.__setup.call(this,e.__base),delete e.__base;var t=e.this$border;t.__setup(e.__closure_this$border),delete e.__closure_this$border};var yt=t.core.Object,bt=yt.prototype,wt=t.core.AnchorLine=function(e,t){yt.apply(this,arguments)},xt=wt.prototype=Object.create(bt);xt.constructor=wt,xt.componentName="core.AnchorLine",xt.toScreen=function(){return this.parent.toScreen()[this.boxIndex]},i.addProperty(xt,"int","boxIndex");var Ct=t.core.Item,Pt=Ct.prototype,kt=t.core.BaseViewContent=function(e,t){Ct.apply(this,arguments)},At=kt.prototype=Object.create(Pt);At.constructor=kt,At.componentName="core.BaseViewContent",t.core._protoOnChanged(At,"x",function(e){this.parent._delayedLayout.schedule()}),t.core._protoOnChanged(At,"y",function(e){this.parent._delayedLayout.schedule()});var Ot=t.core.EventEmitter,$t=Ot.prototype,St=t.core.RAIIEventEmitter=function(e,t){Ot.apply(this,arguments),this._onFirstListener={},this._onLastListener={}},Ut=St.prototype=Object.create($t);Ut.constructor=St,Ut.componentName="core.RAIIEventEmitter",Ut.discard=function(){t.core.EventEmitter.prototype.discard.apply(this)},Ut.on=function(e,i){if(!(e in this._eventHandlers)&&(e in this._onFirstListener?this._onFirstListener[e](e):""in this._onFirstListener&&this._onFirstListener[""](e),this._eventHandlers[e]))throw new Error("listener callback added event handler");t.core.EventEmitter.prototype.on.call(this,e,i)},Ut.onListener=function(e,t,i){this._onFirstListener[e]=t,this._onLastListener[e]=i},Ut.removeAllListeners=function(e){t.core.EventEmitter.prototype.removeAllListeners.call(this,e),e in this._onLastListener?this._onLastListener[e](e):""in this._onLastListener&&this._onLastListener[""](e)};var Et=t.core.Object,It=Et.prototype,zt=t.html5.Stylesheet=function(e,i){Et.apply(this,arguments);var r=this._context,n=r.options,o=this.style=r.createElement("style");o.dom.type="text/css",this.prefix=n.prefix;var s=n.id,a=document.getElementById(s),c=null===a,h=window.Modernizr.prefixedCSS("user-select")+": none; ";o.setHtml("div#"+s+" { position: absolute; visibility: inherit; left: 0px; top: 0px; }div."+this._context.getClass("core-text")+" { width: auto; height: auto; visibility: inherit; }"+(c?"body { overflow-x: hidden; }":"")+this.mangleRule("video","{ position: absolute; visibility: inherit; }")+this.mangleRule("img","{ position: absolute; visibility: inherit; -webkit-touch-callout: none; "+h+" }")),t.html5.html.getElement("head").append(o),this._addRule=t.html5.html.createAddRule(o.dom).bind(this),this._lastId=0},Ht=zt.prototype=Object.create(It);Ht.constructor=zt,Ht.componentName="html5.Stylesheet",Ht.allocateClass=function(e){var t=this.prefix;return(t?t:"")+e+"-"+this._lastId++},Ht.addRule=function(e,t){var i=this.mangleSelector(e);this._addRule(i,t)},Ht.mangleRule=function(e,t){return this.mangleSelector(e)+" "+t+" "},Ht.mangleSelector=function(e){var t=this.prefix;return t?e+"."+t+"core-item":e};var Mt=t.core.Object,Lt=Mt.prototype,Tt=t.html5.Location=function(e,t){Mt.apply(this,arguments);var i=this,r=window.location;window.onhashchange=function(){i.hash=r.hash},window.onpopstate=function(){i.updateActualValues()}},jt=Tt.prototype=Object.create(Lt);jt.constructor=Tt,jt.componentName="html5.Location",jt.updateActualValues=function(){this.hash=window.location.hash,this.href=window.location.href,this.port=window.location.port,this.host=window.location.host,this.origin=window.location.origin,this.hostname=window.location.hostname,this.pathname=window.location.pathname,this.protocol=window.location.protocol,this.search=window.location.search,this.state=window.history.state},jt.changeHref=function(e){window.location.href=e,this.updateActualValues()},jt.pushState=function(e,t,i){window.location.hostname?(window.history.pushState(e,t,i),this.updateActualValues()):(document.title=t,this.state=e)},i.addProperty(jt,"string","hash"),i.addProperty(jt,"string","host"),i.addProperty(jt,"string","href"),i.addProperty(jt,"string","port"),i.addProperty(jt,"string","origin"),i.addProperty(jt,"string","hostname"),i.addProperty(jt,"string","pathname"),i.addProperty(jt,"string","protocol"),i.addProperty(jt,"string","search"),i.addProperty(jt,"Object","state");var Ft=t.core.Object,Bt=Ft.prototype,Rt=t.html5.Orientation=function(e,t){Ft.apply(this,arguments)},Nt=Rt.prototype=Object.create(Bt);return Nt.constructor=Rt,Nt.componentName="html5.Orientation",Nt.onChanged=function(e,i){if(!this._orientationEnabled){var r=this;window.ondeviceorientation=function(e){r.absolute=e.absolute,r.alpha=e.alpha,r.beta=e.beta,r.gamma=e.gamma},this._orientationEnabled=!0}t.core.Object.prototype.onChanged.apply(this,arguments)},i.addProperty(Nt,"real","alpha"),i.addProperty(Nt,"real","beta"),i.addProperty(Nt,"real","gamma"),i.addProperty(Nt,"bool","absolute"),t.core.model=function(){var e={};e._get=function(t){return e[t]};var t=0,i=1,r=2,n=function(e,t){this.type=e,this.length=t};return e.ModelUpdate=function(){this.count=0,this._reset()},e.ModelUpdate.prototype.constructor=e.ModelUpdate,e.ModelUpdate.prototype._reset=function(){this._ranges=[new n(t,this.count)],this._updateIndex=this.count},e.ModelUpdate.prototype._setUpdateIndex=function(e){e<this._updateIndex&&(this._updateIndex=e)},e.ModelUpdate.prototype._find=function(e){var t,i=this._ranges;for(t=0;t<i.length;++t){var r=i[t];if(e<r.length)return{index:t,offset:e};r.length>0&&(e-=r.length)}if(0!=e)throw new Error("invalid index "+e);return{index:t-1,offset:r.length}},e.ModelUpdate.prototype.reset=function(e){this.update(e,0,Math.min(e.count,this.count)),this.count<e.count?this.insert(e,this.count,e.count):this.remove(e,e.count,this.count)},e.ModelUpdate.prototype._merge=function(){for(var e=this._ranges,t=1;t<e.length;){var n=e[t-1],o=e[t];if(n.type===o.type)if(n.type===i&&n.length<0&&o.length>0){var s=Math.min(-n.length,o.length);n.type=r,o.length+=n.length,n.length=s,t>1&&--t}else n.length+=o.length,e.splice(t,1);else n.type==i&&0===n.length?e.splice(t,1):++t}},e.ModelUpdate.prototype._split=function(e,t,i,r){var o=this._ranges;if(0==t)return o.splice(e,0,new n(i,r)),e+1;var s=o[e],a=s.length-t;return s.length=t,0!=a?(o.splice(e+1,0,new n(i,r),new n(s.type,a)),e+2):(o.splice(e+1,0,new n(i,r)),e+2)},e.ModelUpdate.prototype.insert=function(e,t,r){if(!(t>=r)){this._setUpdateIndex(t);var n=this._ranges,o=r-t;if(this.count+=o,this.count!=e.count)throw new Error("unbalanced insert "+this.count+" + ["+t+"-"+r+"], model reported "+e.count);var s=this._find(t),a=n[s.index];0==a.length?(a.type=i,a.length+=o):s.offset>=0?this._split(s.index,s.offset,i,o):this._split(s.index+1,0,i,o),this._merge()}},e.ModelUpdate.prototype.remove=function(e,t,r){if(!(t>=r)){this._setUpdateIndex(t);var n=this._ranges,o=r-t;if(this.count-=o,this.count!=e.count)throw new Error("unbalanced remove "+this.count+" + ["+t+"-"+r+"], model reported "+e.count);var s=this._find(t),a=n[s.index];if(a.type==i)a.length-=o;else for(var c=this._split(s.index,s.offset,i,-o);o>0;){var a=n[c];a.length<=o?(n.splice(c,1),o-=a.length):(a.length-=o,o=0)}this._merge()}},e.ModelUpdate.prototype.update=function(e,o,s){if(!(o>=s)){var a=this._ranges,c=s-o,h=this._find(o),d=h.index,l=a[d];if(h.offset>0&&(a.splice(d+1,0,new n(l.type,l.length-h.offset)),l.length=h.offset,++d,0==l.length))throw new Error("invalid offset");for(;c>0;){var l=a[d],_=l.length;switch(l.type){case t:_>c?(l.length-=c,a.splice(d,0,new n(r,c)),c-=_):(l.type=r,c-=_);break;case i:_>0&&(c-=_),++d;break;case r:c-=_,++d}}this._merge()}},e.ModelUpdate.prototype.apply=function(e,t){var n=0;if(this._ranges.forEach(function(t){var o=t.length;switch(t.type){case i:o>0?(e._insertItems(n,n+o),n+=o):o<0&&e._removeItems(n,n-o);break;case r:e._updateItems(n,n+o),n+=o;break;default:n+=t.length}}),!t&&e._items.length!=this.count)throw new Error("unbalanced items update, view: "+e._items.length+", update:"+this.count);for(var o=this._updateIndex;o<this.count;++o)e._updateDelegateIndex(o);this._reset()},e}(),t.controls.pure.format=function(){
var e={};return e._get=function(t){return e[t]},e.currency=function(e,t,i){var r="\\d(?=(\\d{"+(i||3)+"})+"+(t>0?"\\.":"$")+")";return e.toFixed(Math.max(0,~~t)).replace(new RegExp(r,"g"),"$&,")},e}(),t.html5.dist.modernizr_custom=function(){var e={};return e._get=function(t){return e[t]},!function(e,t,i){function r(e,t){return typeof e===t}function n(){var e,t,i,n,o,s,a;for(var c in y)if(y.hasOwnProperty(c)){if(e=[],t=y[c],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(i=0;i<t.options.aliases.length;i++)e.push(t.options.aliases[i].toLowerCase());for(n=r(t.fn,"function")?t.fn():t.fn,o=0;o<e.length;o++)s=e[o],a=s.split("."),1===a.length?w[a[0]]=n:(!w[a[0]]||w[a[0]]instanceof Boolean||(w[a[0]]=new Boolean(w[a[0]])),w[a[0]][a[1]]=n),m.push((n?"":"no-")+a.join("-"))}}function o(e){var t=x.className,i=w._config.classPrefix||"";if(C&&(t=t.baseVal),w._config.enableJSClass){var r=new RegExp("(^|\\s)"+i+"no-js(\\s|$)");t=t.replace(r,"$1"+i+"js$2")}w._config.enableClasses&&(t+=" "+i+e.join(" "+i),C?x.className.baseVal=t:x.className=t)}function s(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,i){return t+i.toUpperCase()}).replace(/^-/,"")}function a(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function c(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):C?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function h(e,t){return!!~(""+e).indexOf(t)}function d(e,t){return function(){return e.apply(t,arguments)}}function l(e,t,i){var n;for(var o in e)if(e[o]in t)return i===!1?e[o]:(n=t[e[o]],r(n,"function")?d(n,i||t):n);return!1}function _(){var e=t.body;return e||(e=c(C?"svg":"body"),e.fake=!0),e}function p(e,i,r,n){var o,s,a,h,d="modernizr",l=c("div"),p=_();if(parseInt(r,10))for(;r--;)a=c("div"),a.id=n?n[r]:d+(r+1),l.appendChild(a);return o=c("style"),o.type="text/css",o.id="s"+d,(p.fake?p:l).appendChild(o),p.appendChild(l),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),l.id=d,p.fake&&(p.style.background="",p.style.overflow="hidden",h=x.style.overflow,x.style.overflow="hidden",x.appendChild(p)),s=i(l,e),p.fake?(p.parentNode.removeChild(p),x.style.overflow=h,x.offsetHeight):l.parentNode.removeChild(l),!!s}function u(t,r){var n=t.length;if("CSS"in e&&"supports"in e.CSS){for(;n--;)if(e.CSS.supports(a(t[n]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var o=[];n--;)o.push("("+a(t[n])+":"+r+")");return o=o.join(" or "),p("@supports ("+o+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return i}function g(e,t,n,o){function a(){l&&(delete z.style,delete z.modElem)}if(o=!r(o,"undefined")&&o,!r(n,"undefined")){var d=u(e,n);if(!r(d,"undefined"))return d}for(var l,_,p,g,f,v=["modernizr","tspan"];!z.style;)l=!0,z.modElem=c(v.shift()),z.style=z.modElem.style;for(p=e.length,_=0;p>_;_++)if(g=e[_],f=z.style[g],h(g,"-")&&(g=s(g)),z.style[g]!==i){if(o||r(n,"undefined"))return a(),"pfx"!=t||g;try{z.style[g]=n}catch(e){}if(z.style[g]!=f)return a(),"pfx"!=t||g}return a(),!1}function f(e,t,i,n,o){var s=e.charAt(0).toUpperCase()+e.slice(1),a=(e+" "+U.join(s+" ")+s).split(" ");return r(t,"string")||r(t,"undefined")?g(a,t,n,o):(a=(e+" "+k.join(s+" ")+s).split(" "),l(a,t,i))}function v(e,t,r){return f(e,i,i,t,r)}var m=[],y=[],b={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var i=this;setTimeout(function(){t(i[e])},0)},addTest:function(e,t,i){y.push({name:e,fn:t,options:i})},addAsyncTest:function(e){y.push({name:null,fn:e})}},w=function(){};w.prototype=b,w=new w,w.addTest("webworkers","Worker"in e);var x=t.documentElement,C="svg"===x.nodeName.toLowerCase(),P="Moz O ms Webkit",k=b._config.usePrefixes?P.toLowerCase().split(" "):[];b._domPrefixes=k;var A=function(e,t){var i=!1,r=c("div"),n=r.style;if(e in n){var o=k.length;for(n[e]=t,i=n[e];o--&&!i;)n[e]="-"+k[o]+"-"+t,i=n[e]}return""===i&&(i=!1),i};b.prefixedCSSValue=A;var O=b._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];b._prefixes=O,w.addTest("cssgradients",function(){for(var e,t="background-image:",i="gradient(linear,left top,right bottom,from(#9f9),to(white));",r="",n=0,o=O.length-1;o>n;n++)e=0===n?"to ":"",r+=t+O[n]+"linear-gradient("+e+"left top, #9f9, white);";w._config.usePrefixes&&(r+=t+"-webkit-"+i);var s=c("a"),a=s.style;return a.cssText=r,(""+a.backgroundImage).indexOf("gradient")>-1});var $="CSS"in e&&"supports"in e.CSS,S="supportsCSS"in e;w.addTest("supports",$||S);var U=b._config.usePrefixes?P.split(" "):[];b._cssomPrefixes=U;var E=function(t){var r,n=O.length,o=e.CSSRule;if("undefined"==typeof o)return i;if(!t)return!1;if(t=t.replace(/^@/,""),r=t.replace(/-/g,"_").toUpperCase()+"_RULE",r in o)return"@"+t;for(var s=0;n>s;s++){var a=O[s],c=a.toUpperCase()+"_"+r;if(c in o)return"@-"+a.toLowerCase()+"-"+t}return!1};b.atRule=E;var I={elem:c("modernizr")};w._q.push(function(){delete I.elem});var z={style:I.elem.style};w._q.unshift(function(){delete z.style});var H=b.testStyles=p;b.testProp=function(e,t,r){return g([e],i,t,r)},b.testAllProps=f;var M=b.prefixed=function(e,t,i){return 0===e.indexOf("@")?E(e):(-1!=e.indexOf("-")&&(e=s(e)),t?f(e,t,i):f(e,"pfx"))};b.prefixedCSS=function(e){var t=M(e);return t&&a(t)},w.addTest("fullscreen",!(!M("exitFullscreen",t,!1)&&!M("cancelFullScreen",t,!1))),b.testAllProps=v,w.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&v("transform","scale(1)",!0)}),w.addTest("csstransforms3d",function(){var e=!!v("perspective","1px",!0),t=w._config.usePrefixes;if(e&&(!t||"webkitPerspective"in x.style)){var i,r="#modernizr{width:0;height:0}";w.supports?i="@supports (perspective: 1px)":(i="@media (transform-3d)",t&&(i+=",(-webkit-transform-3d)")),i+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",H(r+i,function(t){e=7===t.offsetWidth&&18===t.offsetHeight})}return e}),w.addTest("csstransitions",v("transition","all",!0)),w.addTest("cssfilters",function(){if(w.supports)return v("filter","blur(2px)");var e=c("a");return e.style.cssText=O.join("filter:blur(2px); "),!!e.style.length&&(t.documentMode===i||t.documentMode>9)}),n(),o(m),delete b.addTest,delete b.addAsyncTest;for(var L=0;L<w._q.length;L++)w._q[L]();e.Modernizr=w}(window,document),e}(),t.html5.html=function(){var e={};e._get=function(t){return e[t]},e.createAddRule=function(e){if((e.sheet||{}).insertRule){var t=e.sheet;return function(e,i){t.insertRule(e+"{"+i+"}",t.cssRules.length)}}var t=e.styleSheet||e.sheet;return function(e,i){t.addRule(e,i)}};var i=function(t){var i=document.createElement("style");i.type="text/css",document.head.appendChild(i),this.prefix=t+"C-",this.style=i,this.total=0,this.stats={},this.classes={},this.classes_total=0,this._addRule=e.createAddRule(i)},r=i.prototype;r.constructor=i,r.add=function(e){this.stats[e]=(this.stats[e]||0)+1,++this.total},r.register=function(e){var t=e.join(";"),i=this.classes,r=i[t];if(void 0!==r)return r;var r=i[t]=this.prefix+this.classes_total++;return this._addRule("."+r,t),r},r.classify=function(e){var t=this.total;if(t<10)return"";e.sort();var i=[],r=[],n=this.stats;return e.forEach(function(e,o){var s=n[e],a=s/t;a>.05&&(i.push(e),r.push(o))}),r.length<2?"":(r.forEach(function(t,i){e.splice(t-i,1)}),this.register(i))};var n={};navigator.userAgent.toLowerCase().indexOf("webkit")>=0&&(n.appearance="-webkit-appearance");var o=function(e){var t=n[e];return void 0===t&&(n[e]=t=window.Modernizr.prefixedCSS(e)),t};e.getPrefixedName=o;var s=function(e){var t="_domEventHandler_";e.onListener("",function(i){var r=t+i,n=e[r]=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;++n)r[n]=arguments[n];e.emitWithArgs(i,r)};e.dom.addEventListener(i,n)},function(i){var r=t+i;e.dom.removeEventListener(i,e[r])})},a={};e.loadExternalStylesheet=function(e){if(!a[e]){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("href",e),document.head.appendChild(t),a[e]=!0}},e.autoClassify=!1,e.Element=function(r,n){"string"==typeof n?this.dom=document.createElement(n):this.dom=n,e.autoClassify?r._styleCache||(r._styleCache=new i(r._prefix)):r._styleCache=null,t.core.RAIIEventEmitter.apply(this),this._context=r,this._fragment=[],this._styles={},this._class="",s(this)};var c=e.Element.prototype=Object.create(t.core.RAIIEventEmitter.prototype);c.constructor=e.Element,c.addClass=function(e){this.dom.classList.add(e)},c.setHtml=function(e){var t=this.dom;if(this._fragment.forEach(function(e){t.removeChild(e)}),this._fragment=[],""!==e){var i=document.createDocumentFragment(),r=document.createElement("div");for(r.innerHTML=e;r.firstChild;)this._fragment.push(r.firstChild),i.appendChild(r.firstChild);return t.appendChild(i),t.children}},c.width=function(){return this.dom.clientWidth},c.height=function(){return this.dom.clientHeight},c.fullWidth=function(){return this.dom.scrollWidth},c.fullHeight=function(){return this.dom.scrollHeight},c.style=function(e,t){if(void 0!==t)""!==t?this._styles[e]=t:delete this._styles[e],this.updateStyle();else{if(!(e instanceof Object))return this._styles[e];for(var i in e){var r=e[i];""!==r?this._styles[i]=r:delete this._styles[i]}this.updateStyle()}},c.setAttribute=function(e,t){this.dom.setAttribute(e,t)},c.updateStyle=function(){var e=this.dom;if(e){var t={left:"px",top:"px",width:"px",height:"px","border-radius":"px","border-width":"px","margin-left":"px","margin-top":"px","margin-right":"px","margin-bottom":"px","padding-left":"px","padding-top":"px","padding-right":"px","padding-bottom":"px"},i=this._context._styleCache,r=[];for(var n in this._styles){var s=this._styles[n],a=o(n),c=a!==!1?a:n;Array.isArray(s)&&(s=s.join(","));var h="number"==typeof s?t[n]||"":"";s+=h;var d=c+":"+s;i&&i.add(d),r.push(d)}var l=i?i.classify(r):"";if(l!==this._class){var _=e.classList;""!==this._class&&_.remove(this._class),this._class=l,""!==l&&_.add(l)}this.dom.setAttribute("style",r.join(";"))}},c.append=function(t){this.dom.appendChild(t instanceof e.Element?t.dom:t)},c.discard=function(){t.core.RAIIEventEmitter.prototype.discard.apply(this),this.remove()},c.remove=function(){var e=this.dom;e.parentNode.removeChild(e)},e.Window=function(e,i){t.core.RAIIEventEmitter.apply(this),this._context=e,this.dom=i,s(this)};var h=e.Window.prototype=Object.create(t.core.RAIIEventEmitter.prototype);h.constructor=e.Window,h.width=function(){return this.dom.innerWidth},h.height=function(){return this.dom.innerHeight},h.scrollY=function(){return this.dom.scrollY},e.getElement=function(t){var i=document.getElementsByTagName(t);if(1!=i.length)throw new Error("no tag "+t+"/multiple tags");return new e.Element(this,i[0])},e.init=function(i){var r=i.options,n=i._prefix,o=r.id;n&&(n+="-",log("Context: using prefix",n));var s=new t.html5.html.Window(this,window);i.window=s;var a,c,h=e,d=document.getElementById(o),l=null===d;if(l){a=s.width(),c=s.height(),log("Context: window size: "+a+"x"+c),d=i.createElement("div"),d.dom.id=o,s.on("resize",function(){i.width=s.width(),i.height=s.height()});var _=h.getElement("body");_.append(d)}else d=new h.Element(this,d),a=d.width(),c=d.height(),log("Context: found element by id, size: "+a+"x"+c),s.on("resize",function(){i.width=d.width(),i.height=d.height()});i.element=d,i.width=a,i.height=c,i.style("visibility","hidden"),s.on("scroll",function(e){i.scrollY=s.scrollY()}),s.on("load",function(){i._run()});var p=function(e){var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;i.fullscreen=t};"webkitfullscreenchange mozfullscreenchange fullscreenchange".split(" ").forEach(function(e){d.on(e,p)}),s.on("keydown",function(e){i._processKey(e)&&e.preventDefault()});var u=i.system;window.onfocus=function(){u.pageActive=!0},window.onblur=function(){u.pageActive=!1},i.screenWidth=window.screen.width,i.screenHeight=window.screen.height},e.createElement=function(t,i){return new e.Element(t,i)},e.initImage=function(e){var t=new Image;e._image=t,e._image.onerror=e._onError.bind(e),e._image.onload=function(){var i=t.naturalWidth,r=t.naturalHeight;e.paintedWidth=t.naturalWidth,e.paintedHeight=t.naturalHeight;var n={"background-image":"url("+e.source+")"};switch(e.fillMode){case e.Stretch:n["background-repeat"]="no-repeat",n["background-size"]="100% 100%";break;case e.TileVertically:n["background-repeat"]="repeat-y",n["background-size"]="100%";break;case e.TileHorizontally:n["background-repeat"]="repeat-x",n["background-size"]=i+"px 100%";break;case e.Tile:n["background-repeat"]="repeat-y repeat-x",n["background-size"]="auto";break;case e.PreserveAspectCrop:n["background-repeat"]="no-repeat",n["background-position"]="center",n["background-size"]="cover";break;case e.Pad:n["background-repeat"]="no-repeat",n["background-position"]="0% 0%",n["background-size"]="auto";break;case e.PreserveAspectFit:n["background-repeat"]="no-repeat",n["background-position"]="center",n["background-size"]="contain";var o=e.width,s=e.height,a=0,c=i/r;o&&s&&(a=o/s),c>a&&o?(e.paintedWidth=o,e.paintedHeight=o/c):(e.paintedHeight=s,e.paintedWidth=s*c)}e.style(n),e.width||(e.width=e.paintedWidth),e.height||(e.height=e.paintedHeight),e.status=e.Ready}},e.loadImage=function(e){e._image.src=e.source},e.initText=function(e){e.element.addClass(e._context.getClass("text"))},e.layoutText=function(e){var t=e.wrapMode!=Text.NoWrap;t?e.style({height:"auto","padding-top":0}):e.style({width:"auto",height:"auto","padding-top":0}),e.paintedWidth=e.element.fullWidth(),e.paintedHeight=e.element.fullHeight();var i;switch(i=t?{height:e.height}:{width:e.width,height:e.height},e.verticalAlignment){case e.AlignTop:e._topPadding=0;break;case e.AlignBottom:e._topPadding=e.height-e.paintedHeight;break;case e.AlignVCenter:e._topPadding=(e.height-e.paintedHeight)/2}i["padding-top"]=e._topPadding,i.height=e.height-e._topPadding,e.style(i)},e.run=function(){};var d=window.Modernizr;return e.capabilities={csstransforms3d:d.csstransforms3d,csstransforms:d.csstransforms,csstransitions:d.csstransitions},e.requestAnimationFrame=d.prefixed("requestAnimationFrame",window)||function(e){return setTimeout(e,0)},e.cancelAnimationFrame=d.prefixed("cancelAnimationFrame",window)||function(e){return clearTimeout(e)},e.enterFullscreenMode=function(e){return d.prefixed("requestFullscreen",e.dom)()},e.exitFullscreenMode=function(){return window.Modernizr.prefixed("exitFullscreen",document)()},e.inFullscreenMode=function(){return!!window.Modernizr.prefixed("fullscreenElement",document)},e}(),e}();try{var l10n={},context=qml._context=new qml.core.Context(null,!1,{id:"qml-context-index",prefix:"qml",l10n:l10n}),closure={};context.__create(closure),context.__setup(closure),closure=void 0,context.init(),context.start(new qml.dyndef.UiIndex(context)),context.run()}catch(e){log("qml initialization failed: ",e,e.stack)}
